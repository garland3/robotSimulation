<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Robot Simulation: C:/Users/Anthony/Dropbox/Senior Project/attempt 7/attempt 7/attempt 7/ImageAnalysis2.cs Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Robot Simulation</div>
   <div id="projectbrief">A robot simulation of the IGVC robot</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('_image_analysis2_8cs.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<h1>C:/Users/Anthony/Dropbox/Senior Project/attempt 7/attempt 7/attempt 7/ImageAnalysis2.cs</h1>  </div>
</div>
<div class="contents">
<a href="_image_analysis2_8cs.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">//-----------------------------------------------------------------------</span>
<a name="l00002"></a>00002 <span class="comment">// &lt;copyright file=&quot;ImageAnalysis.cs&quot; company=&quot;Anthony&quot;&gt;</span>
<a name="l00003"></a>00003 <span class="comment">//     Preforms the image analysis compuation on the robot view.  </span>
<a name="l00004"></a>00004 <span class="comment">// &lt;/copyright&gt;</span>
<a name="l00005"></a>00005 <span class="comment">//-----------------------------------------------------------------------</span>
<a name="l00006"></a>00006 <span class="keyword">namespace </span>Attempt_7
<a name="l00007"></a>00007 {
<a name="l00008"></a>00008     <span class="keyword">using</span> System;
<a name="l00009"></a>00009     <span class="keyword">using</span> System.Collections.Generic;
<a name="l00010"></a>00010     <span class="keyword">using</span> System.Diagnostics;
<a name="l00011"></a>00011     <span class="keyword">using</span> System.IO;
<a name="l00012"></a>00012     <span class="keyword">using</span> System.Linq;
<a name="l00013"></a>00013     <span class="keyword">using</span> System.Timers;
<a name="l00014"></a>00014     <span class="keyword">using</span> Microsoft.Xna.Framework;
<a name="l00015"></a>00015     <span class="keyword">using</span> Microsoft.Xna.Framework.Audio;
<a name="l00016"></a>00016     <span class="keyword">using</span> Microsoft.Xna.Framework.Content;
<a name="l00017"></a>00017     <span class="keyword">using</span> Microsoft.Xna.Framework.GamerServices;
<a name="l00018"></a>00018     <span class="keyword">using</span> Microsoft.Xna.Framework.Graphics;
<a name="l00019"></a>00019     <span class="keyword">using</span> Microsoft.Xna.Framework.Input;
<a name="l00020"></a>00020     <span class="keyword">using</span> Microsoft.Xna.Framework.Media;
<a name="l00021"></a>00021 
<a name="l00032"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html">00032</a>     <span class="keyword">public</span> <span class="keyword">class </span><a class="code" href="class_attempt__7_1_1_image_analysis.html" title="It was easier to redure 640*480 small triangles and view then from a distance than to put a texture o...">ImageAnalysis</a> : Microsoft.Xna.Framework.GameComponent
<a name="l00033"></a>00033     {
<a name="l00034"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#aaa874c7b203d72acf483aac60d199c10">00034</a>         <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="class_attempt__7_1_1_image_analysis.html#aaa874c7b203d72acf483aac60d199c10">OLD_HOUGH_MODE</a> = 0;
<a name="l00035"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#a11feb673e1bb0953762222e164cec0c7">00035</a>         <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="class_attempt__7_1_1_image_analysis.html#a11feb673e1bb0953762222e164cec0c7">New_HOUGH_MODE</a> = 1;
<a name="l00036"></a>00036         
<a name="l00040"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#a74cfdb396e3abe4a6f5a9ccbe4f948e2">00040</a>         <span class="keyword">private</span> <span class="keyword">const</span> <span class="keywordtype">short</span> <a class="code" href="class_attempt__7_1_1_image_analysis.html#a74cfdb396e3abe4a6f5a9ccbe4f948e2" title="Number of lines the hough transform should find.">NumberofLinesToFind</a> = 2;
<a name="l00041"></a>00041 
<a name="l00042"></a>00042       
<a name="l00046"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#a8cdd9f3be232a5cf32006ddd52bc4ae2">00046</a>         <span class="keyword">private</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="class_attempt__7_1_1_image_analysis.html#a8cdd9f3be232a5cf32006ddd52bc4ae2" title="Size of the Acuumlator&amp;#39;s lenght. Must be able to fit the largest posible value of rho...">AccumLength</a> = 600;
<a name="l00047"></a>00047 
<a name="l00051"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#a75787da0f52a71c54f5f8a18d32467b8">00051</a>         <span class="keyword">private</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="class_attempt__7_1_1_image_analysis.html#a75787da0f52a71c54f5f8a18d32467b8" title="lenght of the hold hough accumulator">AccumLengthOld</a> = 810;
<a name="l00052"></a>00052 
<a name="l00056"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#ae80e0958661793ecf50c1a17f1b7e9d0">00056</a>         <span class="keyword">private</span> <span class="keyword">const</span> <span class="keywordtype">short</span> <a class="code" href="class_attempt__7_1_1_image_analysis.html#ae80e0958661793ecf50c1a17f1b7e9d0" title="How big the steps are for a potiential theta. In degreees. Large values reduce computation but less a...">ThetaIncrement</a> = 3;
<a name="l00057"></a>00057 
<a name="l00061"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#aade101616dd021e3cbb0501146a78835">00061</a>         <span class="keyword">private</span> <span class="keyword">const</span> <span class="keywordtype">short</span> <a class="code" href="class_attempt__7_1_1_image_analysis.html#aade101616dd021e3cbb0501146a78835" title="How big the steps are for a potiential rho values. Large values reduce computation but less acurate...">RhoIncrement</a> = 6;
<a name="l00062"></a>00062 
<a name="l00066"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#ace29e13b249b0a3d0fccd7228f47937b">00066</a>         <span class="keyword">private</span> <span class="keyword">const</span> <span class="keywordtype">short</span> <a class="code" href="class_attempt__7_1_1_image_analysis.html#ace29e13b249b0a3d0fccd7228f47937b" title="Inorder to make computations go faster, not every pixels is anylzed every time. 1 out of This value s...">UpdateSquareDimForDrawing</a> = 2;
<a name="l00067"></a>00067 
<a name="l00071"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#a228e6183baa7e0b58771ad6be4117d7f">00071</a>         <span class="keyword">private</span> <span class="keyword">const</span> <span class="keywordtype">short</span> <a class="code" href="class_attempt__7_1_1_image_analysis.html#a228e6183baa7e0b58771ad6be4117d7f" title="Inorder to make drawing go faster, not every pixels is updated every time. 1 out of This value square...">UpdateSquareDimForAnalysis</a> = 2;
<a name="l00072"></a>00072 
<a name="l00076"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#af57eb11bc470f90921bed1b60cfc9741">00076</a>         <span class="keyword">private</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="class_attempt__7_1_1_image_analysis.html#af57eb11bc470f90921bed1b60cfc9741" title="Number of degrees around a maximum to clear around before searching the Accumulator again...">ClearArroundMaxDegree</a> = 5;
<a name="l00077"></a>00077 
<a name="l00081"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#a5de31952bf3d80b7ad21aa4c0acc3092">00081</a>         <span class="keyword">private</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="class_attempt__7_1_1_image_analysis.html#a5de31952bf3d80b7ad21aa4c0acc3092" title="Number of rho values around a maximum to clear around before searching the Accumulator again...">ClearArroundMaxRho</a> = 8;
<a name="l00082"></a>00082 
<a name="l00086"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#a3622f807410a6198f92490ee1964b3ff">00086</a>         <span class="keyword">private</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="class_attempt__7_1_1_image_analysis.html#a3622f807410a6198f92490ee1964b3ff" title="Used by the smooth method. Dimension of Number of pixels to look around for the smooth function...">SmoothSearchSize</a> = 4;
<a name="l00087"></a>00087 
<a name="l00091"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#a4b69c7da8f3962c2220e8d77fd9c51e9">00091</a>         <span class="keyword">private</span> <span class="keywordtype">int</span> <a class="code" href="class_attempt__7_1_1_image_analysis.html#a4b69c7da8f3962c2220e8d77fd9c51e9" title="If 0 then Old mode (top left origin), if 1 then New Hough mode( bottom Center).">currentMode</a> = 0;
<a name="l00092"></a>00092 
<a name="l00096"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#a9b47675bd42bc8dacf5c93bb02befd81">00096</a>         <span class="keyword">private</span> <span class="keywordtype">bool</span> <a class="code" href="class_attempt__7_1_1_image_analysis.html#a9b47675bd42bc8dacf5c93bb02befd81" title="If true then steering desisions will be based off the theta&amp;#39;s of the hough transform.">turnIndicatorisTheta</a> = <span class="keyword">false</span>;
<a name="l00097"></a>00097 
<a name="l00098"></a>00098 
<a name="l00102"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#a5c675bc754b9cc7185837d234766dd04">00102</a>         <span class="keyword">private</span> Texture2D <a class="code" href="class_attempt__7_1_1_image_analysis.html#a5c675bc754b9cc7185837d234766dd04" title="Texture object that represents the robot camera&amp;#39;s current view.">robotCameraView</a>;
<a name="l00103"></a>00103 
<a name="l00107"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#ad698ffe87469398b956a2a1c5ae2b840">00107</a>         <span class="keyword">private</span> <span class="keywordtype">bool</span>[,] <a class="code" href="class_attempt__7_1_1_image_analysis.html#ab79ad9fb17e17983e14861ee93c3479a" title="TrueFalse maps used for marking pixels either &amp;quot;good&amp;quot; or &amp;quot;bad&amp;quot;.">trueFalseMap</a>, <a class="code" href="class_attempt__7_1_1_image_analysis.html#a88fcfe8ea8917bfe5e458a845cc2b291">trueFalseMapB</a>, <a class="code" href="class_attempt__7_1_1_image_analysis.html#ad698ffe87469398b956a2a1c5ae2b840">trueFalseMapC</a>;
<a name="l00108"></a>00108 
<a name="l00112"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#affd258e6985c66c0a80415e3ddebb4e7">00112</a>         <span class="keyword">private</span> <span class="keywordtype">int</span> <a class="code" href="class_attempt__7_1_1_image_analysis.html#affd258e6985c66c0a80415e3ddebb4e7" title="Screen Width of the image to analze.">screenWidth</a>;
<a name="l00113"></a>00113 
<a name="l00117"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#af5af6f29720f9a85b1cb6a71016b7af8">00117</a>         <span class="keyword">private</span> <span class="keywordtype">int</span> <a class="code" href="class_attempt__7_1_1_image_analysis.html#af5af6f29720f9a85b1cb6a71016b7af8" title="Screen Height of the image to analze.">screenHeight</a>;
<a name="l00118"></a>00118 
<a name="l00122"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#ace2cb703da0214a4f5565f2c619d54f8">00122</a>         <span class="keyword">private</span> <span class="keywordtype">int</span> <a class="code" href="class_attempt__7_1_1_image_analysis.html#ace2cb703da0214a4f5565f2c619d54f8" title="The turn indicator measures measures how much the analysis things the robot should go right or left...">turnIndication</a> = 0;
<a name="l00123"></a>00123 
<a name="l00130"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#a51a11cb6235b097fb2140c32ab734521">00130</a>         <span class="keyword">private</span> <span class="keywordtype">double</span>[] <a class="code" href="class_attempt__7_1_1_image_analysis.html#a51a11cb6235b097fb2140c32ab734521" title="Stores information about lines from the hough transform. each polarRho we want to find = 7 more value...">houghInfo</a>;
<a name="l00131"></a>00131 
<a name="l00136"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#aeb7215aa1a091fa531c07ee3aa4c03d6">00136</a>         <span class="keyword">private</span> Vector3[] <a class="code" href="class_attempt__7_1_1_image_analysis.html#aeb7215aa1a091fa531c07ee3aa4c03d6" title="Stores vector3 locations of the beginning and end points of two lines on the screen. Was part of the old Hough system, but potientially still useful, so has not deleted. 0 = start location of line, 1 = end location ofline.">houghLineStartandStopVectors</a>;
<a name="l00137"></a>00137 
<a name="l00141"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#a3490343b5c67fcbbdbb23257a56e4b3a">00141</a>         <span class="keyword">private</span> Color[,] <a class="code" href="class_attempt__7_1_1_image_analysis.html#a3490343b5c67fcbbdbb23257a56e4b3a" title="Color Array 2D from the robot camera that is analzed.">colorArray</a>;
<a name="l00142"></a>00142 
<a name="l00146"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#acdb050a1334538156f7a3332ae7f332a">00146</a>         <span class="keyword">private</span> Color[] <a class="code" href="class_attempt__7_1_1_image_analysis.html#acdb050a1334538156f7a3332ae7f332a" title="Color Array 2D from the robot camera that is analzed. Can&amp;#39;t extract informatino directly from the...">colorArray1D</a>;
<a name="l00147"></a>00147 
<a name="l00151"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#aea1d803966f442e9699b52e196613f8c">00151</a>         <span class="keyword">private</span> <span class="keywordtype">short</span> <a class="code" href="class_attempt__7_1_1_image_analysis.html#a8fa0aaf56dde7fca58135cdc8c74575f" title="These values are the incremented numbers used in the giant double &amp;quot;for-loops&amp;quot;. The &amp;quot;1&amp;quot; values are the for the first &amp;quot;for-loop&amp;quot;.">count1A</a> = 0, <a class="code" href="class_attempt__7_1_1_image_analysis.html#a53eb6ffb4fdd39ce7f8f59a7358e2144">count1B</a> = 1, <a class="code" href="class_attempt__7_1_1_image_analysis.html#a87af8ae466e41feca21cb200e3463bf9">count1C</a> = 0, <a class="code" href="class_attempt__7_1_1_image_analysis.html#a195927d24332255e0130b0bf2791e146">count1D</a> = 1, <a class="code" href="class_attempt__7_1_1_image_analysis.html#aea1d803966f442e9699b52e196613f8c">count1E</a> = 0;
<a name="l00152"></a>00152 
<a name="l00156"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#a1c9acb58142af8f283eb7958305b4337">00156</a>         <span class="keyword">private</span> <span class="keywordtype">short</span> <a class="code" href="class_attempt__7_1_1_image_analysis.html#ae79ba8e9b9e910edf5aded0604399f07" title="These values are the incremented numbers used in the giant double &amp;quot;for-loops&amp;quot;. The &amp;quot;2&amp;quot; values are the for the second &amp;quot;for-loop&amp;quot;.">count2A</a> = 0, <a class="code" href="class_attempt__7_1_1_image_analysis.html#aa9956634aa2f4b718beb2d398b3d2b46">count2B</a> = 0, <a class="code" href="class_attempt__7_1_1_image_analysis.html#a8f2510e6449b532e0a8aa7c616d8f474">count2C</a> = 0, <a class="code" href="class_attempt__7_1_1_image_analysis.html#a1c9acb58142af8f283eb7958305b4337">count2E</a> = 0;
<a name="l00157"></a>00157 
<a name="l00161"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#a6dfa6991871f29000b2e32e2a1bed121">00161</a>         <span class="keyword">private</span> <span class="keywordtype">int</span>[] <a class="code" href="class_attempt__7_1_1_image_analysis.html#a6dfa6991871f29000b2e32e2a1bed121" title="An array of the middle clear pixels for each row. The length of the array is the number of rows = thi...">middleValues</a>;
<a name="l00162"></a>00162 
<a name="l00166"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#a29de7b233adab56b0b7df3464b1528ef">00166</a>         <span class="keyword">private</span> <span class="keywordtype">int</span> <a class="code" href="class_attempt__7_1_1_image_analysis.html#a29de7b233adab56b0b7df3464b1528ef" title="Number of white pixels the &amp;quot;FindWhite&amp;quot; found.">totalWhiteCnt</a> = 0;
<a name="l00167"></a>00167 
<a name="l00171"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#ac861772cdcfacb7ac2401079c651eb4e">00171</a>         <span class="keyword">private</span> <span class="keywordtype">short</span>[,] <a class="code" href="class_attempt__7_1_1_image_analysis.html#ac861772cdcfacb7ac2401079c651eb4e" title="The accumlator for the hough values. Each position is a hough Bin. Each bin represents a line in Cart...">accum2</a>;
<a name="l00172"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#acb2ae3d661927b0467b5d4fdc7eded98">00172</a>         <span class="keyword">private</span> <span class="keywordtype">short</span>[,] <a class="code" href="class_attempt__7_1_1_image_analysis.html#acb2ae3d661927b0467b5d4fdc7eded98">accum1</a>; <span class="comment">// the old way. </span>
<a name="l00173"></a>00173 
<a name="l00177"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#ae51a397ecb99b137ec6920e1329e8b6b">00177</a>         <span class="keyword">private</span> <span class="keywordtype">int</span> <a class="code" href="class_attempt__7_1_1_image_analysis.html#ae51a397ecb99b137ec6920e1329e8b6b" title="Used by the smooth method. How many pixels must also be white in the area around a white pixel for it...">cntThreshold</a> = 15;
<a name="l00178"></a>00178 
<a name="l00182"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#aa9e1387a4605edfe0d910284724a671a">00182</a>         <span class="keyword">private</span> <span class="keywordtype">int</span> <a class="code" href="class_attempt__7_1_1_image_analysis.html#aa9e1387a4605edfe0d910284724a671a" title="On a scale of 0-255 how high does a pixel RGB value have to be before being declared white...">redGood</a>, <a class="code" href="class_attempt__7_1_1_image_analysis.html#afdb8b1b0ef151cceeed6883a6ca955f5">blueGood</a>, <a class="code" href="class_attempt__7_1_1_image_analysis.html#a288ae76c53338d5463b05a6c978baf61">greenGood</a>;
<a name="l00183"></a>00183 
<a name="l00187"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#ab67ff7ed27c69e82b67b7d0d3b6e1fec">00187</a>         <span class="keyword">private</span> <span class="keywordtype">int</span> <a class="code" href="class_attempt__7_1_1_image_analysis.html#ab67ff7ed27c69e82b67b7d0d3b6e1fec" title="Sets red_good, blue_good, green_good to this value.">whiteParam</a> = 150;
<a name="l00188"></a>00188 
<a name="l00192"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#a20ae1fce740efa28137cde3029a1b4bf">00192</a>         <a class="code" href="class_attempt__7_1_1_draw_image_analysis.html" title="This is a game component that implements IUpdateable. Draws the image analysis information.">DrawImageAnalysis</a> <a class="code" href="class_attempt__7_1_1_image_analysis.html#a20ae1fce740efa28137cde3029a1b4bf" title="The drawingImageAnalysis class handles the vertex information the shows what the robot is thinking...">drawAnalysis</a>;
<a name="l00193"></a>00193 
<a name="l00194"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#af6c217c696c6b6e16d8988e89d39666b">00194</a>         <span class="keywordtype">int</span> <a class="code" href="class_attempt__7_1_1_image_analysis.html#af6c217c696c6b6e16d8988e89d39666b">countOfNewHoughSingularities</a> = 0;
<a name="l00195"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#ab9f59ec453ba211ebc7cd614c6ab5fab">00195</a>         <span class="keywordtype">int</span> <a class="code" href="class_attempt__7_1_1_image_analysis.html#ab9f59ec453ba211ebc7cd614c6ab5fab">countofOldHoughSingularities</a> = 0;
<a name="l00196"></a>00196 
<a name="l00203"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#a372086fbe7753711c79fb65694e74b8b">00203</a>         <span class="keyword">public</span> <a class="code" href="class_attempt__7_1_1_image_analysis.html#a372086fbe7753711c79fb65694e74b8b" title="Initializes a new instance of the ImageAnalysis class.">ImageAnalysis</a>(Game game, Vector2 screenSize, List&lt;Viewport&gt; viewPortList1)
<a name="l00204"></a>00204             : base(game)
<a name="l00205"></a>00205         {
<a name="l00206"></a>00206             this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#affd258e6985c66c0a80415e3ddebb4e7" title="Screen Width of the image to analze.">screenWidth</a> = (int)screenSize.X;
<a name="l00207"></a>00207             <span class="keyword">this</span>.screenHeight = (<span class="keywordtype">int</span>)screenSize.Y;
<a name="l00208"></a>00208 
<a name="l00209"></a>00209             <span class="comment">// Creates the image drawing analysis object.</span>
<a name="l00210"></a>00210             this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a20ae1fce740efa28137cde3029a1b4bf" title="The drawingImageAnalysis class handles the vertex information the shows what the robot is thinking...">drawAnalysis</a> = <span class="keyword">new</span> <a class="code" href="class_attempt__7_1_1_draw_image_analysis.html" title="This is a game component that implements IUpdateable. Draws the image analysis information.">DrawImageAnalysis</a>(game, this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#affd258e6985c66c0a80415e3ddebb4e7" title="Screen Width of the image to analze.">screenWidth</a>, this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#af5af6f29720f9a85b1cb6a71016b7af8" title="Screen Height of the image to analze.">screenHeight</a>, <a class="code" href="class_attempt__7_1_1_image_analysis.html#ace29e13b249b0a3d0fccd7228f47937b" title="Inorder to make computations go faster, not every pixels is anylzed every time. 1 out of This value s...">UpdateSquareDimForDrawing</a>, <a class="code" href="class_attempt__7_1_1_image_analysis.html#a228e6183baa7e0b58771ad6be4117d7f" title="Inorder to make drawing go faster, not every pixels is updated every time. 1 out of This value square...">UpdateSquareDimForAnalysis</a>, <a class="code" href="class_attempt__7_1_1_image_analysis.html#a74cfdb396e3abe4a6f5a9ccbe4f948e2" title="Number of lines the hough transform should find.">NumberofLinesToFind</a>, <a class="code" href="class_attempt__7_1_1_image_analysis.html#ae80e0958661793ecf50c1a17f1b7e9d0" title="How big the steps are for a potiential theta. In degreees. Large values reduce computation but less a...">ThetaIncrement</a>, <a class="code" href="class_attempt__7_1_1_image_analysis.html#aade101616dd021e3cbb0501146a78835" title="How big the steps are for a potiential rho values. Large values reduce computation but less acurate...">RhoIncrement</a>, viewPortList1, <span class="keyword">this</span>);
<a name="l00211"></a>00211             this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a20ae1fce740efa28137cde3029a1b4bf" title="The drawingImageAnalysis class handles the vertex information the shows what the robot is thinking...">drawAnalysis</a>.DrawOrder = game.Components.Count;
<a name="l00212"></a>00212             Game.Components.Add(this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a20ae1fce740efa28137cde3029a1b4bf" title="The drawingImageAnalysis class handles the vertex information the shows what the robot is thinking...">drawAnalysis</a>);
<a name="l00213"></a>00213         }
<a name="l00214"></a>00214 
<a name="l00218"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#af250995c0e8937dc0ad3c26239716225">00218</a>         <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">void</span> <a class="code" href="class_attempt__7_1_1_image_analysis.html#af250995c0e8937dc0ad3c26239716225" title="Called when the class is initialized. Creates many of the arrays and sets many of the values...">Initialize</a>()
<a name="l00219"></a>00219         {
<a name="l00220"></a>00220             <span class="comment">// Create the arrays needed. Building them now will save CPU later. </span>
<a name="l00221"></a>00221             this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#ab79ad9fb17e17983e14861ee93c3479a" title="TrueFalse maps used for marking pixels either &amp;quot;good&amp;quot; or &amp;quot;bad&amp;quot;.">trueFalseMap</a> = <span class="keyword">new</span> <span class="keywordtype">bool</span>[this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#affd258e6985c66c0a80415e3ddebb4e7" title="Screen Width of the image to analze.">screenWidth</a>, this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#af5af6f29720f9a85b1cb6a71016b7af8" title="Screen Height of the image to analze.">screenHeight</a>];
<a name="l00222"></a>00222             this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a88fcfe8ea8917bfe5e458a845cc2b291">trueFalseMapB</a> = <span class="keyword">new</span> <span class="keywordtype">bool</span>[this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#affd258e6985c66c0a80415e3ddebb4e7" title="Screen Width of the image to analze.">screenWidth</a>, this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#af5af6f29720f9a85b1cb6a71016b7af8" title="Screen Height of the image to analze.">screenHeight</a>];
<a name="l00223"></a>00223             this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#ad698ffe87469398b956a2a1c5ae2b840">trueFalseMapC</a> = <span class="keyword">new</span> <span class="keywordtype">bool</span>[this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#affd258e6985c66c0a80415e3ddebb4e7" title="Screen Width of the image to analze.">screenWidth</a>, this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#af5af6f29720f9a85b1cb6a71016b7af8" title="Screen Height of the image to analze.">screenHeight</a>];
<a name="l00224"></a>00224 
<a name="l00225"></a>00225             this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#ac861772cdcfacb7ac2401079c651eb4e" title="The accumlator for the hough values. Each position is a hough Bin. Each bin represents a line in Cart...">accum2</a> = <span class="keyword">new</span> <span class="keywordtype">short</span>[360 / <a class="code" href="class_attempt__7_1_1_image_analysis.html#ae80e0958661793ecf50c1a17f1b7e9d0" title="How big the steps are for a potiential theta. In degreees. Large values reduce computation but less a...">ThetaIncrement</a>, <a class="code" href="class_attempt__7_1_1_image_analysis.html#a8cdd9f3be232a5cf32006ddd52bc4ae2" title="Size of the Acuumlator&amp;#39;s lenght. Must be able to fit the largest posible value of rho...">AccumLength</a> / <a class="code" href="class_attempt__7_1_1_image_analysis.html#aade101616dd021e3cbb0501146a78835" title="How big the steps are for a potiential rho values. Large values reduce computation but less acurate...">RhoIncrement</a>]; <span class="comment">// Build the accumlator array. Make is smaller or shorter based on the size of the rho and theta increments</span>
<a name="l00226"></a>00226             this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#acb2ae3d661927b0467b5d4fdc7eded98">accum1</a> = <span class="keyword">new</span> <span class="keywordtype">short</span>[360 / <a class="code" href="class_attempt__7_1_1_image_analysis.html#ae80e0958661793ecf50c1a17f1b7e9d0" title="How big the steps are for a potiential theta. In degreees. Large values reduce computation but less a...">ThetaIncrement</a>, <a class="code" href="class_attempt__7_1_1_image_analysis.html#a75787da0f52a71c54f5f8a18d32467b8" title="lenght of the hold hough accumulator">AccumLengthOld</a> / <a class="code" href="class_attempt__7_1_1_image_analysis.html#aade101616dd021e3cbb0501146a78835" title="How big the steps are for a potiential rho values. Large values reduce computation but less acurate...">RhoIncrement</a>];
<a name="l00227"></a>00227             this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#acdb050a1334538156f7a3332ae7f332a" title="Color Array 2D from the robot camera that is analzed. Can&amp;#39;t extract informatino directly from the...">colorArray1D</a> = <span class="keyword">new</span> Color[this.screenWidth * this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#af5af6f29720f9a85b1cb6a71016b7af8" title="Screen Height of the image to analze.">screenHeight</a>]; <span class="comment">// Create a 1D array of color</span>
<a name="l00228"></a>00228             this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a3490343b5c67fcbbdbb23257a56e4b3a" title="Color Array 2D from the robot camera that is analzed.">colorArray</a> = <span class="keyword">new</span> Color[this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#affd258e6985c66c0a80415e3ddebb4e7" title="Screen Width of the image to analze.">screenWidth</a>, this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#af5af6f29720f9a85b1cb6a71016b7af8" title="Screen Height of the image to analze.">screenHeight</a>]; <span class="comment">// Create a 2D array of color</span>
<a name="l00229"></a>00229 
<a name="l00230"></a>00230             this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a51a11cb6235b097fb2140c32ab734521" title="Stores information about lines from the hough transform. each polarRho we want to find = 7 more value...">houghInfo</a> = <span class="keyword">new</span> <span class="keywordtype">double</span>[(11 * <a class="code" href="class_attempt__7_1_1_image_analysis.html#a74cfdb396e3abe4a6f5a9ccbe4f948e2" title="Number of lines the hough transform should find.">NumberofLinesToFind</a>) + 5]; <span class="comment">// Make the array to store hough information. Must be double so that slopes which are fractions can be stored</span>
<a name="l00231"></a>00231 
<a name="l00232"></a>00232             <span class="comment">// Set the color thresholds</span>
<a name="l00233"></a>00233             this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#aa9e1387a4605edfe0d910284724a671a" title="On a scale of 0-255 how high does a pixel RGB value have to be before being declared white...">redGood</a> = this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#ab67ff7ed27c69e82b67b7d0d3b6e1fec" title="Sets red_good, blue_good, green_good to this value.">whiteParam</a>;
<a name="l00234"></a>00234             this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#afdb8b1b0ef151cceeed6883a6ca955f5">blueGood</a> = this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#ab67ff7ed27c69e82b67b7d0d3b6e1fec" title="Sets red_good, blue_good, green_good to this value.">whiteParam</a>;
<a name="l00235"></a>00235             this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a288ae76c53338d5463b05a6c978baf61">greenGood</a> = this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#ab67ff7ed27c69e82b67b7d0d3b6e1fec" title="Sets red_good, blue_good, green_good to this value.">whiteParam</a>;
<a name="l00236"></a>00236 
<a name="l00237"></a>00237             this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#aeb7215aa1a091fa531c07ee3aa4c03d6" title="Stores vector3 locations of the beginning and end points of two lines on the screen. Was part of the old Hough system, but potientially still useful, so has not deleted. 0 = start location of line, 1 = end location ofline.">houghLineStartandStopVectors</a> = <span class="keyword">new</span> Vector3[<a class="code" href="class_attempt__7_1_1_image_analysis.html#a74cfdb396e3abe4a6f5a9ccbe4f948e2" title="Number of lines the hough transform should find.">NumberofLinesToFind</a> * 4];
<a name="l00238"></a>00238             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="class_attempt__7_1_1_image_analysis.html#a74cfdb396e3abe4a6f5a9ccbe4f948e2" title="Number of lines the hough transform should find.">NumberofLinesToFind</a> * 4; i++)
<a name="l00239"></a>00239             {
<a name="l00240"></a>00240                 this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#aeb7215aa1a091fa531c07ee3aa4c03d6" title="Stores vector3 locations of the beginning and end points of two lines on the screen. Was part of the old Hough system, but potientially still useful, so has not deleted. 0 = start location of line, 1 = end location ofline.">houghLineStartandStopVectors</a>[i] = Vector3.Zero;
<a name="l00241"></a>00241             }
<a name="l00242"></a>00242 
<a name="l00243"></a>00243             this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a6dfa6991871f29000b2e32e2a1bed121" title="An array of the middle clear pixels for each row. The length of the array is the number of rows = thi...">middleValues</a> = <span class="keyword">new</span> <span class="keywordtype">int</span>[this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#af5af6f29720f9a85b1cb6a71016b7af8" title="Screen Height of the image to analze.">screenHeight</a>]; <span class="comment">// Steering desisions are based off the average middle clear value for each row</span>
<a name="l00244"></a>00244 
<a name="l00245"></a>00245             base.Initialize();
<a name="l00246"></a>00246         }
<a name="l00247"></a>00247 
<a name="l00252"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#a1d0bc75993df71df5d005ab3d749bb81">00252</a>         <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_attempt__7_1_1_image_analysis.html#a1d0bc75993df71df5d005ab3d749bb81" title="Stores the texture from the robot camera in a color array before the texture is disposed. Expicitly called in the SimulationMain Draw method.">Update1</a>(GameTime gameTime1)
<a name="l00253"></a>00253         {
<a name="l00254"></a>00254             <span class="keywordflow">if</span> (this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a5c675bc754b9cc7185837d234766dd04" title="Texture object that represents the robot camera&amp;#39;s current view.">robotCameraView</a> != null)
<a name="l00255"></a>00255             {
<a name="l00256"></a>00256                 this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a3490343b5c67fcbbdbb23257a56e4b3a" title="Color Array 2D from the robot camera that is analzed.">colorArray</a> = this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#ac70a680405b76bd8b0ece8ee2a8112e8" title="Takes a texture and makes it into a 2D color array. Passing in the arrays is faster than trying to bu...">TextureTo2DArray</a>(this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a5c675bc754b9cc7185837d234766dd04" title="Texture object that represents the robot camera&amp;#39;s current view.">robotCameraView</a>, this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#acdb050a1334538156f7a3332ae7f332a" title="Color Array 2D from the robot camera that is analzed. Can&amp;#39;t extract informatino directly from the...">colorArray1D</a>, this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a3490343b5c67fcbbdbb23257a56e4b3a" title="Color Array 2D from the robot camera that is analzed.">colorArray</a>);
<a name="l00257"></a>00257             }
<a name="l00258"></a>00258         }
<a name="l00259"></a>00259 
<a name="l00264"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#aa6cac5de12d6bf454500ee5498db48cb">00264</a>         <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_attempt__7_1_1_image_analysis.html#aa6cac5de12d6bf454500ee5498db48cb" title="Takes a 2D renderTarget/Texture and sets it as the image to analze. Explicitly called in the Simulati...">SetRobotCameraView</a>(Texture2D text)
<a name="l00265"></a>00265         {
<a name="l00266"></a>00266             this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a5c675bc754b9cc7185837d234766dd04" title="Texture object that represents the robot camera&amp;#39;s current view.">robotCameraView</a> = text;
<a name="l00267"></a>00267         }
<a name="l00268"></a>00268 
<a name="l00273"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#ab597ab75ce16d1fd903b68e7df2a2c7f">00273</a>         <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">void</span> <a class="code" href="class_attempt__7_1_1_image_analysis.html#ab597ab75ce16d1fd903b68e7df2a2c7f" title="Calls the analysis methods that actually do all the work. Basically the Main function for the Image A...">Update</a>(GameTime gameTime)
<a name="l00274"></a>00274         {
<a name="l00275"></a>00275             <a class="code" href="class_attempt__7_1_1_image_analysis.html#a4b69c7da8f3962c2220e8d77fd9c51e9" title="If 0 then Old mode (top left origin), if 1 then New Hough mode( bottom Center).">currentMode</a> = Attempt_7.SimulationMain.currentHoughMode; <span class="comment">//Comment out for the UnitTest only</span>
<a name="l00276"></a>00276 
<a name="l00277"></a>00277             <span class="keywordflow">if</span> (this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a3490343b5c67fcbbdbb23257a56e4b3a" title="Color Array 2D from the robot camera that is analzed.">colorArray</a> != null)
<a name="l00278"></a>00278             {
<a name="l00279"></a>00279                 this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#ad698ffe87469398b956a2a1c5ae2b840">trueFalseMapC</a> = this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a9418e8e0a6868d294d27b97cadf6d958" title="Takes a 2D color array and finds the pixels that are &amp;quot;white&amp;quot;.">FindWhite</a>(this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a3490343b5c67fcbbdbb23257a56e4b3a" title="Color Array 2D from the robot camera that is analzed.">colorArray</a>); <span class="comment">// Find White                </span>
<a name="l00280"></a>00280                 this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a89a87d17049aa2c3f1b31af9b8ffcb07" title="For each white pixel that might be part of a line, Find all the potiential lines going through it and...">Hough</a>(this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#ad698ffe87469398b956a2a1c5ae2b840">trueFalseMapC</a>); <span class="comment">// Run the hough  </span>
<a name="l00281"></a>00281                 <span class="keywordflow">if</span> (this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a9b47675bd42bc8dacf5c93bb02befd81" title="If true then steering desisions will be based off the theta&amp;#39;s of the hough transform.">turnIndicatorisTheta</a> != <span class="keyword">true</span>)
<a name="l00282"></a>00282                 {
<a name="l00283"></a>00283                     this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#ab79ad9fb17e17983e14861ee93c3479a" title="TrueFalse maps used for marking pixels either &amp;quot;good&amp;quot; or &amp;quot;bad&amp;quot;.">trueFalseMap</a> = this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a0befd0244fb507716329010283730fb6" title="Find a path through the map to go through and return it as a bool map, also set the turn indicator...">ShowPath</a>(this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#ad698ffe87469398b956a2a1c5ae2b840">trueFalseMapC</a>, this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a88fcfe8ea8917bfe5e458a845cc2b291">trueFalseMapB</a>); <span class="comment">// Find the path through the map   </span>
<a name="l00284"></a>00284                 }
<a name="l00285"></a>00285 
<a name="l00287"></a>00287             }
<a name="l00288"></a>00288             base.Update(gameTime);
<a name="l00289"></a>00289         }
<a name="l00290"></a>00290 
<a name="l00295"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#a55b77047aaacc5a78fcd70401da3b069">00295</a>         <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="class_attempt__7_1_1_image_analysis.html#a55b77047aaacc5a78fcd70401da3b069" title="Allows access to the WhiteCount in the image.">GetWhiteCount</a>()
<a name="l00296"></a>00296         {
<a name="l00297"></a>00297             <span class="keywordflow">return</span> this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a29de7b233adab56b0b7df3464b1528ef" title="Number of white pixels the &amp;quot;FindWhite&amp;quot; found.">totalWhiteCnt</a>;
<a name="l00298"></a>00298         }
<a name="l00299"></a>00299 
<a name="l00304"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#a897a0f80fbf65670828c8a1a1db13d97">00304</a>         <span class="keyword">public</span> <span class="keywordtype">double</span>[] <a class="code" href="class_attempt__7_1_1_image_analysis.html#a897a0f80fbf65670828c8a1a1db13d97" title="Gets the houghInfo Array.">GetHoughInfo</a>()
<a name="l00305"></a>00305         {
<a name="l00306"></a>00306             <span class="keywordflow">return</span> this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a51a11cb6235b097fb2140c32ab734521" title="Stores information about lines from the hough transform. each polarRho we want to find = 7 more value...">houghInfo</a>;
<a name="l00307"></a>00307         }
<a name="l00308"></a>00308 
<a name="l00313"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#a1ba8eee3151c73ef5023003ee7b57b67">00313</a>         <span class="keyword">public</span> <span class="keywordtype">bool</span>[,] <a class="code" href="class_attempt__7_1_1_image_analysis.html#a1ba8eee3151c73ef5023003ee7b57b67" title="Allows access to the bool map that is to be drawn.">GetTrueFalseMaptoDraw</a>()
<a name="l00314"></a>00314         {
<a name="l00315"></a>00315             <span class="keywordflow">return</span> this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#ad698ffe87469398b956a2a1c5ae2b840">trueFalseMapC</a>;
<a name="l00316"></a>00316         }
<a name="l00317"></a>00317 
<a name="l00322"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#ae14af27b7aaa3d4a1006af2a56ab14d1">00322</a>         <span class="keyword">public</span> <span class="keywordtype">string</span> <a class="code" href="class_attempt__7_1_1_image_analysis.html#ae14af27b7aaa3d4a1006af2a56ab14d1" title="Gets the Hough mode. 0 = Old, 1 = New.">GetHoughMode</a>()
<a name="l00323"></a>00323         {
<a name="l00324"></a>00324             <span class="keywordtype">string</span> mode = <span class="keywordtype">string</span>.Empty;
<a name="l00325"></a>00325 
<a name="l00326"></a>00326             <span class="keywordflow">if</span> (this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a4b69c7da8f3962c2220e8d77fd9c51e9" title="If 0 then Old mode (top left origin), if 1 then New Hough mode( bottom Center).">currentMode</a> == 0)
<a name="l00327"></a>00327             {
<a name="l00328"></a>00328                 mode = <span class="stringliteral">&quot;Old&quot;</span>;
<a name="l00329"></a>00329             }
<a name="l00330"></a>00330             <span class="keywordflow">else</span>
<a name="l00331"></a>00331             {
<a name="l00332"></a>00332                 mode = <span class="stringliteral">&quot;New&quot;</span>;
<a name="l00333"></a>00333             }
<a name="l00334"></a>00334 
<a name="l00335"></a>00335             <span class="keywordflow">return</span> mode;
<a name="l00336"></a>00336         }
<a name="l00337"></a>00337 
<a name="l00342"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#ab8604cecb2f620a88298bccc48a4436d">00342</a>         <span class="keyword">public</span> Color[,] <a class="code" href="class_attempt__7_1_1_image_analysis.html#ab8604cecb2f620a88298bccc48a4436d" title="Gets the Color map to be drawn.">GetColorMapToDraw</a>()
<a name="l00343"></a>00343         {
<a name="l00344"></a>00344             <span class="keywordflow">return</span> this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a3490343b5c67fcbbdbb23257a56e4b3a" title="Color Array 2D from the robot camera that is analzed.">colorArray</a>;
<a name="l00345"></a>00345         }
<a name="l00346"></a>00346 
<a name="l00351"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#a99c5e65fe48a1145d7c9afba96bfb220">00351</a>         <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="class_attempt__7_1_1_image_analysis.html#a99c5e65fe48a1145d7c9afba96bfb220" title="Allows the SimulationMain to get the turnIndicator.">GetTurnIndicator</a>()
<a name="l00352"></a>00352         {
<a name="l00353"></a>00353             <span class="keywordflow">return</span> this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#ace2cb703da0214a4f5565f2c619d54f8" title="The turn indicator measures measures how much the analysis things the robot should go right or left...">turnIndication</a>;
<a name="l00354"></a>00354         }
<a name="l00355"></a>00355 
<a name="l00360"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#a23adf47c39e8990ae161dd46dcb43846">00360</a>         <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="class_attempt__7_1_1_image_analysis.html#a23adf47c39e8990ae161dd46dcb43846" title="Returns the number of times rho=0 in the new hough system.">GetSingularitiesNewHough</a>()
<a name="l00361"></a>00361         {
<a name="l00362"></a>00362             <span class="keywordflow">return</span> this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#af6c217c696c6b6e16d8988e89d39666b">countOfNewHoughSingularities</a>;
<a name="l00363"></a>00363         }
<a name="l00364"></a>00364 
<a name="l00369"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#a8b8e7e705c97bbb5da1300c139ec0f36">00369</a>         <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="class_attempt__7_1_1_image_analysis.html#a8b8e7e705c97bbb5da1300c139ec0f36" title="Returns the number of times rho=0 in the Old hough system.">GetSingularitesOldHough</a>()
<a name="l00370"></a>00370         {
<a name="l00371"></a>00371             <span class="keywordflow">return</span> this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#ab9f59ec453ba211ebc7cd614c6ab5fab">countofOldHoughSingularities</a>;
<a name="l00372"></a>00372         }
<a name="l00373"></a>00373 
<a name="l00378"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#a3c35b4a6a6a1e4464fc79772caa612cf">00378</a>         <span class="keyword">public</span> Vector3[] <a class="code" href="class_attempt__7_1_1_image_analysis.html#a3c35b4a6a6a1e4464fc79772caa612cf" title="Gets the array holding information about the hough lines and where to draw them.">GetHoughStartandStopVectors</a>()
<a name="l00379"></a>00379         {
<a name="l00380"></a>00380             <span class="keywordflow">return</span> this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#aeb7215aa1a091fa531c07ee3aa4c03d6" title="Stores vector3 locations of the beginning and end points of two lines on the screen. Was part of the old Hough system, but potientially still useful, so has not deleted. 0 = start location of line, 1 = end location ofline.">houghLineStartandStopVectors</a>;
<a name="l00381"></a>00381         }
<a name="l00382"></a>00382 
<a name="l00390"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#ac70a680405b76bd8b0ece8ee2a8112e8">00390</a>         <span class="keyword">private</span> Color[,] <a class="code" href="class_attempt__7_1_1_image_analysis.html#ac70a680405b76bd8b0ece8ee2a8112e8" title="Takes a texture and makes it into a 2D color array. Passing in the arrays is faster than trying to bu...">TextureTo2DArray</a>(Texture2D texture, Color[] colors1D, Color[,] colors2D)
<a name="l00391"></a>00391         {
<a name="l00392"></a>00392             texture.GetData(colors1D);
<a name="l00393"></a>00393             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> x = 0; x &lt; texture.Width; x++)
<a name="l00394"></a>00394             {
<a name="l00395"></a>00395                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> y = 0; y &lt; texture.Height; y++)
<a name="l00396"></a>00396                 {
<a name="l00397"></a>00397                     colors2D[x, y] = colors1D[x + (y * texture.Width)];
<a name="l00398"></a>00398                 }
<a name="l00399"></a>00399             }
<a name="l00400"></a>00400 
<a name="l00401"></a>00401             <span class="keywordflow">return</span> colors2D;
<a name="l00402"></a>00402         }
<a name="l00403"></a>00403 
<a name="l00409"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#a9418e8e0a6868d294d27b97cadf6d958">00409</a>         <span class="keyword">private</span> <span class="keywordtype">bool</span>[,] <a class="code" href="class_attempt__7_1_1_image_analysis.html#a9418e8e0a6868d294d27b97cadf6d958" title="Takes a 2D color array and finds the pixels that are &amp;quot;white&amp;quot;.">FindWhite</a>(Color[,] colorArray1)
<a name="l00410"></a>00410         {
<a name="l00411"></a>00411             <span class="comment">// True = bad, False = good.</span>
<a name="l00412"></a>00412             this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a29de7b233adab56b0b7df3464b1528ef" title="Number of white pixels the &amp;quot;FindWhite&amp;quot; found.">totalWhiteCnt</a> = 0;
<a name="l00413"></a>00413             <span class="keywordtype">int</span> i, j;
<a name="l00414"></a>00414             <span class="keywordtype">bool</span>[,] <a class="code" href="class_attempt__7_1_1_image_analysis.html#ab79ad9fb17e17983e14861ee93c3479a" title="TrueFalse maps used for marking pixels either &amp;quot;good&amp;quot; or &amp;quot;bad&amp;quot;.">trueFalseMap</a> = <span class="keyword">new</span> <span class="keywordtype">bool</span>[colorArray1.GetLength(0), colorArray1.GetLength(1)]; <span class="comment">// Create the bool map.</span>
<a name="l00415"></a>00415 
<a name="l00416"></a>00416             <span class="keywordflow">for</span> (i = 0; i &lt; this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#affd258e6985c66c0a80415e3ddebb4e7" title="Screen Width of the image to analze.">screenWidth</a>; ++i)
<a name="l00417"></a>00417             {
<a name="l00418"></a>00418                 <span class="keywordflow">for</span> (j = 0; j &lt; this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#af5af6f29720f9a85b1cb6a71016b7af8" title="Screen Height of the image to analze.">screenHeight</a>; ++j)
<a name="l00419"></a>00419                 {
<a name="l00420"></a>00420                     <span class="comment">// If above the thresholds. </span>
<a name="l00421"></a>00421                     <span class="keywordflow">if</span> ((colorArray1[i, j].R &gt; this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#aa9e1387a4605edfe0d910284724a671a" title="On a scale of 0-255 how high does a pixel RGB value have to be before being declared white...">redGood</a>)
<a name="l00422"></a>00422                         &amp;&amp; (colorArray1[i, j].G &gt; this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a288ae76c53338d5463b05a6c978baf61">greenGood</a>)
<a name="l00423"></a>00423                         &amp;&amp; (colorArray1[i, j].B &gt; this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#afdb8b1b0ef151cceeed6883a6ca955f5">blueGood</a>))
<a name="l00424"></a>00424                     {
<a name="l00425"></a>00425                         trueFalseMap[i, j] = <span class="keyword">true</span>;
<a name="l00426"></a>00426                         this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a29de7b233adab56b0b7df3464b1528ef" title="Number of white pixels the &amp;quot;FindWhite&amp;quot; found.">totalWhiteCnt</a>++;
<a name="l00427"></a>00427                     }
<a name="l00428"></a>00428                     <span class="keywordflow">else</span>
<a name="l00429"></a>00429                     {
<a name="l00430"></a>00430                         trueFalseMap[i, j] = <span class="keyword">false</span>;
<a name="l00431"></a>00431                     }
<a name="l00432"></a>00432                 }
<a name="l00433"></a>00433             }
<a name="l00434"></a>00434 
<a name="l00435"></a>00435             <span class="keywordflow">return</span> <a class="code" href="class_attempt__7_1_1_image_analysis.html#ab79ad9fb17e17983e14861ee93c3479a" title="TrueFalse maps used for marking pixels either &amp;quot;good&amp;quot; or &amp;quot;bad&amp;quot;.">trueFalseMap</a>;
<a name="l00436"></a>00436         }
<a name="l00437"></a>00437 
<a name="l00444"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#a879442dce1e8ad7240a78101c31cace4">00444</a>         <span class="keyword">private</span> <span class="keywordtype">bool</span>[,] <a class="code" href="class_attempt__7_1_1_image_analysis.html#a879442dce1e8ad7240a78101c31cace4" title="Determines if white pixels meet the Width threshold to possibly be a line. NOT IN USE RIGHT NOW******...">Whiteline</a>(<span class="keywordtype">bool</span>[,] whitemap)
<a name="l00445"></a>00445         {
<a name="l00446"></a>00446             <span class="keywordtype">int</span> i, j, b, cnt;
<a name="l00447"></a>00447             <span class="keywordtype">bool</span>[,] isLine = <span class="keyword">new</span> <span class="keywordtype">bool</span>[(int)this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#affd258e6985c66c0a80415e3ddebb4e7" title="Screen Width of the image to analze.">screenWidth</a>, (<span class="keywordtype">int</span>)this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#af5af6f29720f9a85b1cb6a71016b7af8" title="Screen Height of the image to analze.">screenHeight</a>]; <span class="comment">// Make a new array</span>
<a name="l00448"></a>00448             <span class="keywordflow">for</span> (i = 0; i &lt; this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#affd258e6985c66c0a80415e3ddebb4e7" title="Screen Width of the image to analze.">screenWidth</a>; ++i)
<a name="l00449"></a>00449             {
<a name="l00450"></a>00450                 <span class="keywordflow">for</span> (j = 0; j &lt; this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#af5af6f29720f9a85b1cb6a71016b7af8" title="Screen Height of the image to analze.">screenHeight</a>; ++j)
<a name="l00451"></a>00451                 {
<a name="l00452"></a>00452                     <span class="keywordflow">if</span> (whitemap[i, j] == <span class="keyword">true</span>)
<a name="l00453"></a>00453                     {
<a name="l00454"></a>00454                         cnt = 0;
<a name="l00455"></a>00455                         <span class="keywordflow">for</span> (b = 0; b &lt;= 25; b++)
<a name="l00456"></a>00456                         {
<a name="l00457"></a>00457                             <span class="keywordflow">if</span> (j + b &lt; this.screenHeight &amp;&amp; whitemap[i, j + b] == <span class="keyword">true</span>)
<a name="l00458"></a>00458                             {
<a name="l00459"></a>00459                                 cnt = cnt + 1;
<a name="l00460"></a>00460                             }
<a name="l00461"></a>00461                         }
<a name="l00462"></a>00462 
<a name="l00463"></a>00463                         <span class="keywordflow">if</span> (cnt &gt; 3 &amp;&amp; cnt &lt; 15)
<a name="l00464"></a>00464                         {
<a name="l00465"></a>00465                             isLine[i, j] = <span class="keyword">true</span>;
<a name="l00466"></a>00466                         }
<a name="l00467"></a>00467                         <span class="keywordflow">else</span>
<a name="l00468"></a>00468                         {
<a name="l00469"></a>00469                             isLine[i, j] = <span class="keyword">false</span>;
<a name="l00470"></a>00470                         }
<a name="l00471"></a>00471                     }
<a name="l00472"></a>00472                     <span class="keywordflow">else</span>
<a name="l00473"></a>00473                     {
<a name="l00474"></a>00474                         isLine[i, j] = <span class="keyword">false</span>;
<a name="l00475"></a>00475                     }
<a name="l00476"></a>00476                 }
<a name="l00477"></a>00477             }
<a name="l00478"></a>00478 
<a name="l00479"></a>00479             <span class="keywordflow">return</span> isLine;
<a name="l00480"></a>00480         }
<a name="l00481"></a>00481 
<a name="l00489"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#a87fb97262f08f3b21afd2bcdb29bbe6c">00489</a>         <span class="keyword">private</span> <span class="keywordtype">bool</span>[,] <a class="code" href="class_attempt__7_1_1_image_analysis.html#a87fb97262f08f3b21afd2bcdb29bbe6c" title="Takes a truefalse map and for each pixel checks the other pixels around it to see if they are also wh...">Smooth</a>(<span class="keywordtype">bool</span>[,] original, <span class="keywordtype">bool</span>[,] <span class="keyword">final</span>)
<a name="l00490"></a>00490         {
<a name="l00491"></a>00491             <span class="keywordtype">int</span> cnt;
<a name="l00492"></a>00492             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a53eb6ffb4fdd39ce7f8f59a7358e2144">count1B</a>; i &lt; this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#affd258e6985c66c0a80415e3ddebb4e7" title="Screen Width of the image to analze.">screenWidth</a>; i += <a class="code" href="class_attempt__7_1_1_image_analysis.html#a228e6183baa7e0b58771ad6be4117d7f" title="Inorder to make drawing go faster, not every pixels is updated every time. 1 out of This value square...">UpdateSquareDimForAnalysis</a>)
<a name="l00493"></a>00493             {
<a name="l00494"></a>00494                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#aa9956634aa2f4b718beb2d398b3d2b46">count2B</a>; j &lt; this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#af5af6f29720f9a85b1cb6a71016b7af8" title="Screen Height of the image to analze.">screenHeight</a>; j += <a class="code" href="class_attempt__7_1_1_image_analysis.html#a228e6183baa7e0b58771ad6be4117d7f" title="Inorder to make drawing go faster, not every pixels is updated every time. 1 out of This value square...">UpdateSquareDimForAnalysis</a>)
<a name="l00495"></a>00495                 {
<a name="l00496"></a>00496                     <span class="keywordflow">if</span> (original[i, j] == <span class="keyword">true</span>)
<a name="l00497"></a>00497                     {
<a name="l00498"></a>00498                         cnt = 0;
<a name="l00499"></a>00499                         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> a = -<a class="code" href="class_attempt__7_1_1_image_analysis.html#a3622f807410a6198f92490ee1964b3ff" title="Used by the smooth method. Dimension of Number of pixels to look around for the smooth function...">SmoothSearchSize</a>; a &lt;= <a class="code" href="class_attempt__7_1_1_image_analysis.html#a3622f807410a6198f92490ee1964b3ff" title="Used by the smooth method. Dimension of Number of pixels to look around for the smooth function...">SmoothSearchSize</a>; a++)
<a name="l00500"></a>00500                         {
<a name="l00501"></a>00501                             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> b = -<a class="code" href="class_attempt__7_1_1_image_analysis.html#a3622f807410a6198f92490ee1964b3ff" title="Used by the smooth method. Dimension of Number of pixels to look around for the smooth function...">SmoothSearchSize</a>; b &lt;= <a class="code" href="class_attempt__7_1_1_image_analysis.html#a3622f807410a6198f92490ee1964b3ff" title="Used by the smooth method. Dimension of Number of pixels to look around for the smooth function...">SmoothSearchSize</a>; b++)
<a name="l00502"></a>00502                             {
<a name="l00503"></a>00503                                 <span class="keywordflow">if</span> (i + a &gt; -1 &amp;&amp; i + a &lt; this.screenWidth &amp;&amp; j + b &gt; -1 &amp;&amp; j + b &lt; this.screenHeight)
<a name="l00504"></a>00504                                 {
<a name="l00505"></a>00505                                     <span class="keywordflow">if</span> (original[i + a, j + b] == <span class="keyword">true</span>)
<a name="l00506"></a>00506                                     {
<a name="l00507"></a>00507                                         cnt = cnt + 1;
<a name="l00508"></a>00508                                     }
<a name="l00509"></a>00509                                 }
<a name="l00510"></a>00510                             }
<a name="l00511"></a>00511                         }
<a name="l00512"></a>00512 
<a name="l00513"></a>00513                         <span class="keywordflow">if</span> (cnt &gt; this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#ae51a397ecb99b137ec6920e1329e8b6b" title="Used by the smooth method. How many pixels must also be white in the area around a white pixel for it...">cntThreshold</a>)
<a name="l00514"></a>00514                         {
<a name="l00515"></a>00515                             <span class="keyword">final</span>[i, j] = <span class="keyword">true</span>;
<a name="l00516"></a>00516                         }
<a name="l00517"></a>00517                         <span class="keywordflow">else</span>
<a name="l00518"></a>00518                         {
<a name="l00519"></a>00519                             <span class="keyword">final</span>[i, j] = <span class="keyword">false</span>;
<a name="l00520"></a>00520                         }
<a name="l00521"></a>00521                     }
<a name="l00522"></a>00522                     <span class="keywordflow">else</span>
<a name="l00523"></a>00523                     {
<a name="l00524"></a>00524                         <span class="keyword">final</span>[i, j] = <span class="keyword">false</span>;
<a name="l00525"></a>00525                     }
<a name="l00526"></a>00526                 }
<a name="l00527"></a>00527             }
<a name="l00528"></a>00528 
<a name="l00529"></a>00529             this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a53eb6ffb4fdd39ce7f8f59a7358e2144">count1B</a>++;
<a name="l00530"></a>00530             <span class="keywordflow">if</span> (this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a53eb6ffb4fdd39ce7f8f59a7358e2144">count1B</a> == <a class="code" href="class_attempt__7_1_1_image_analysis.html#ace29e13b249b0a3d0fccd7228f47937b" title="Inorder to make computations go faster, not every pixels is anylzed every time. 1 out of This value s...">UpdateSquareDimForDrawing</a>)
<a name="l00531"></a>00531             {
<a name="l00532"></a>00532                 this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a53eb6ffb4fdd39ce7f8f59a7358e2144">count1B</a> = 0;
<a name="l00533"></a>00533                 this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#aa9956634aa2f4b718beb2d398b3d2b46">count2B</a>++;
<a name="l00534"></a>00534                 <span class="keywordflow">if</span> (this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#aa9956634aa2f4b718beb2d398b3d2b46">count2B</a> == <a class="code" href="class_attempt__7_1_1_image_analysis.html#ace29e13b249b0a3d0fccd7228f47937b" title="Inorder to make computations go faster, not every pixels is anylzed every time. 1 out of This value s...">UpdateSquareDimForDrawing</a>)
<a name="l00535"></a>00535                 {
<a name="l00536"></a>00536                     this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#aa9956634aa2f4b718beb2d398b3d2b46">count2B</a> = 0;
<a name="l00537"></a>00537                 }
<a name="l00538"></a>00538             }
<a name="l00539"></a>00539 
<a name="l00540"></a>00540             <span class="keywordflow">return</span> <span class="keyword">final</span>;
<a name="l00541"></a>00541         }
<a name="l00542"></a>00542 
<a name="l00550"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#a0befd0244fb507716329010283730fb6">00550</a>         <span class="keyword">private</span> <span class="keywordtype">bool</span>[,] <a class="code" href="class_attempt__7_1_1_image_analysis.html#a0befd0244fb507716329010283730fb6" title="Find a path through the map to go through and return it as a bool map, also set the turn indicator...">ShowPath</a>(<span class="keywordtype">bool</span>[,] blocked, <span class="keywordtype">bool</span>[,] clearPath)
<a name="l00551"></a>00551         {
<a name="l00552"></a>00552             <span class="keywordtype">int</span> lastRightX = this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#affd258e6985c66c0a80415e3ddebb4e7" title="Screen Width of the image to analze.">screenWidth</a>, lastLeftX = 0;
<a name="l00553"></a>00553             <span class="keywordtype">int</span> leftX, rightX;
<a name="l00554"></a>00554             <span class="keywordtype">int</span> sum = 0;
<a name="l00555"></a>00555 
<a name="l00556"></a>00556             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> rowNumber = this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#af5af6f29720f9a85b1cb6a71016b7af8" title="Screen Height of the image to analze.">screenHeight</a> - this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a195927d24332255e0130b0bf2791e146">count1D</a> - 1; rowNumber &gt; 0; rowNumber -= <a class="code" href="class_attempt__7_1_1_image_analysis.html#a228e6183baa7e0b58771ad6be4117d7f" title="Inorder to make drawing go faster, not every pixels is updated every time. 1 out of This value square...">UpdateSquareDimForAnalysis</a>)
<a name="l00557"></a>00557             {
<a name="l00558"></a>00558                 <span class="comment">// Start in the middle</span>
<a name="l00559"></a>00559                 leftX = (int)((lastLeftX + lastRightX) / 2);
<a name="l00560"></a>00560 
<a name="l00561"></a>00561                 <span class="comment">// Search starting in the middle and bottom of picture and go left (i.e. subtract) for a blocked pixel</span>
<a name="l00562"></a>00562                 <span class="keywordflow">while</span> (leftX &gt; lastLeftX &amp;&amp; blocked[leftX, rowNumber] == <span class="keyword">false</span>)
<a name="l00563"></a>00563                 {
<a name="l00564"></a>00564                     clearPath[leftX, rowNumber] = <span class="keyword">true</span>;
<a name="l00565"></a>00565                     leftX--;
<a name="l00566"></a>00566                 }
<a name="l00567"></a>00567 
<a name="l00568"></a>00568                 <span class="comment">// Start in the middle and bottome go right </span>
<a name="l00569"></a>00569                 rightX = (int)((lastLeftX + lastRightX) / 2);
<a name="l00570"></a>00570 
<a name="l00571"></a>00571                 <span class="keywordflow">while</span> (rightX &lt; lastRightX &amp;&amp; blocked[rightX, rowNumber] == <span class="keyword">false</span>)
<a name="l00572"></a>00572                 {
<a name="l00573"></a>00573                     clearPath[rightX, rowNumber] = <span class="keyword">true</span>;
<a name="l00574"></a>00574                     rightX++;
<a name="l00575"></a>00575                 }
<a name="l00576"></a>00576 
<a name="l00577"></a>00577                 lastLeftX = leftX;
<a name="l00578"></a>00578                 lastRightX = rightX;
<a name="l00579"></a>00579                 sum += (int)((lastLeftX + lastRightX) / 2);
<a name="l00580"></a>00580             }
<a name="l00581"></a>00581 
<a name="l00582"></a>00582             this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a195927d24332255e0130b0bf2791e146">count1D</a>++;
<a name="l00583"></a>00583             <span class="keywordflow">if</span> (this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a195927d24332255e0130b0bf2791e146">count1D</a> == <a class="code" href="class_attempt__7_1_1_image_analysis.html#a228e6183baa7e0b58771ad6be4117d7f" title="Inorder to make drawing go faster, not every pixels is updated every time. 1 out of This value square...">UpdateSquareDimForAnalysis</a>)
<a name="l00584"></a>00584             {
<a name="l00585"></a>00585                 this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a195927d24332255e0130b0bf2791e146">count1D</a> = 0;
<a name="l00586"></a>00586             }
<a name="l00587"></a>00587 
<a name="l00588"></a>00588             <span class="comment">// Find the average middle pixels for each row and set the turn indicator based on this value. </span>
<a name="l00589"></a>00589             this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#ace2cb703da0214a4f5565f2c619d54f8" title="The turn indicator measures measures how much the analysis things the robot should go right or left...">turnIndication</a> = ((sum * <a class="code" href="class_attempt__7_1_1_image_analysis.html#a228e6183baa7e0b58771ad6be4117d7f" title="Inorder to make drawing go faster, not every pixels is updated every time. 1 out of This value square...">UpdateSquareDimForAnalysis</a>) / this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#af5af6f29720f9a85b1cb6a71016b7af8" title="Screen Height of the image to analze.">screenHeight</a>) - (this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#affd258e6985c66c0a80415e3ddebb4e7" title="Screen Width of the image to analze.">screenWidth</a> / 2);
<a name="l00590"></a>00590             <span class="keywordflow">return</span> clearPath;
<a name="l00591"></a>00591         }
<a name="l00592"></a>00592 
<a name="l00599"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#a74a456e2880a858c96a7d8802250c504">00599</a>         <span class="keyword">private</span> <span class="keywordtype">void</span> <a class="code" href="class_attempt__7_1_1_image_analysis.html#a74a456e2880a858c96a7d8802250c504" title="Finds Max value in Hough. Store information about that max.">FindMaxInAccumArrayOfHough</a>(<span class="keywordtype">short</span>[,] accumToAnalze, <span class="keywordtype">short</span> thetaIncrement, <span class="keywordtype">short</span> startIndexOfStoringHoughInfoList)
<a name="l00600"></a>00600         {
<a name="l00601"></a>00601             <span class="keywordtype">int</span> maxTheta = 1;
<a name="l00602"></a>00602             <span class="keywordtype">int</span> maxRho = 1;
<a name="l00603"></a>00603             <span class="keywordtype">int</span> maxAccum = 1;
<a name="l00604"></a>00604             <span class="keywordtype">int</span> accumDim1 = accumToAnalze.GetLength(0);
<a name="l00605"></a>00605             <span class="keywordtype">int</span> accumDim2 = accumToAnalze.GetLength(1);
<a name="l00606"></a>00606 
<a name="l00607"></a>00607             <span class="comment">// Run through to find cell with most votes</span>
<a name="l00608"></a>00608             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> s = 0; s &lt; accumDim1; s++)
<a name="l00609"></a>00609             {
<a name="l00610"></a>00610                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> t = 0; t &lt; accumDim2; t++)
<a name="l00611"></a>00611                 {
<a name="l00612"></a>00612                     <span class="keywordflow">if</span> (accumToAnalze[s, t] &gt; maxAccum)
<a name="l00613"></a>00613                     {
<a name="l00614"></a>00614                         maxTheta = s;
<a name="l00615"></a>00615                         maxRho = t;
<a name="l00616"></a>00616                         maxAccum = accumToAnalze[s, t];
<a name="l00617"></a>00617                     }
<a name="l00618"></a>00618                 }
<a name="l00619"></a>00619             }
<a name="l00620"></a>00620 
<a name="l00621"></a>00621             <span class="keywordtype">double</span> slope1 = 1;
<a name="l00622"></a>00622             <span class="keywordtype">int</span> yintercept1 = 0;
<a name="l00623"></a>00623             <span class="keywordtype">double</span> x1 = 0;
<a name="l00624"></a>00624             <span class="keywordtype">double</span> y1 = 0;
<a name="l00625"></a>00625 
<a name="l00626"></a>00626             <span class="keywordflow">if</span> (this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a4b69c7da8f3962c2220e8d77fd9c51e9" title="If 0 then Old mode (top left origin), if 1 then New Hough mode( bottom Center).">currentMode</a> == <a class="code" href="class_attempt__7_1_1_image_analysis.html#a11feb673e1bb0953762222e164cec0c7">New_HOUGH_MODE</a>)
<a name="l00627"></a>00627             {
<a name="l00628"></a>00628                 maxTheta *= thetaIncrement; <span class="comment">// Scale the Theta back to real size.</span>
<a name="l00629"></a>00629                 maxRho = maxRho * <a class="code" href="class_attempt__7_1_1_image_analysis.html#aade101616dd021e3cbb0501146a78835" title="How big the steps are for a potiential rho values. Large values reduce computation but less acurate...">RhoIncrement</a>; <span class="comment">// Scale the Rho back to real size.</span>
<a name="l00630"></a>00630                 x1 = (int)(maxRho * Math.Cos(MathHelper.ToRadians(maxTheta))); <span class="comment">// Find the x Point corresponding the theta, rho</span>
<a name="l00631"></a>00631                 y1 = (int)(maxRho * Math.Sin(MathHelper.ToRadians(maxTheta))); <span class="comment">// Find the y Point corresponding the theta, rho               </span>
<a name="l00632"></a>00632 
<a name="l00633"></a>00633                 <span class="keywordflow">if</span> (x1 == 0)
<a name="l00634"></a>00634                 {
<a name="l00635"></a>00635                     x1 = 0.00001; <span class="comment">// don&#39;t divide by zero</span>
<a name="l00636"></a>00636                 }
<a name="l00637"></a>00637                 slope1 = Math.Round(Math.Tan(MathHelper.ToRadians(maxTheta)), 2); <span class="comment">// Calculating the slope and round to 2 digits.                </span>
<a name="l00638"></a>00638                 yintercept1 = (int)(y1 - (slope1 * x1));
<a name="l00639"></a>00639 
<a name="l00640"></a>00640                 <span class="comment">// Store the information found about the line in the &#39;this.houghInfo&#39; array starting at the value &#39;StartIndexOfStoringHoughInfoList&#39;</span>
<a name="l00641"></a>00641                 this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a51a11cb6235b097fb2140c32ab734521" title="Stores information about lines from the hough transform. each polarRho we want to find = 7 more value...">houghInfo</a>[startIndexOfStoringHoughInfoList + 0] = slope1;
<a name="l00642"></a>00642                 this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a51a11cb6235b097fb2140c32ab734521" title="Stores information about lines from the hough transform. each polarRho we want to find = 7 more value...">houghInfo</a>[startIndexOfStoringHoughInfoList + 1] = yintercept1;
<a name="l00643"></a>00643                 this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a51a11cb6235b097fb2140c32ab734521" title="Stores information about lines from the hough transform. each polarRho we want to find = 7 more value...">houghInfo</a>[startIndexOfStoringHoughInfoList + 2] = maxRho;
<a name="l00644"></a>00644                 this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a51a11cb6235b097fb2140c32ab734521" title="Stores information about lines from the hough transform. each polarRho we want to find = 7 more value...">houghInfo</a>[startIndexOfStoringHoughInfoList + 3] = maxTheta;
<a name="l00645"></a>00645                 this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a51a11cb6235b097fb2140c32ab734521" title="Stores information about lines from the hough transform. each polarRho we want to find = 7 more value...">houghInfo</a>[startIndexOfStoringHoughInfoList + 4] = x1;
<a name="l00646"></a>00646                 this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a51a11cb6235b097fb2140c32ab734521" title="Stores information about lines from the hough transform. each polarRho we want to find = 7 more value...">houghInfo</a>[startIndexOfStoringHoughInfoList + 5] = y1;
<a name="l00647"></a>00647                 this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a51a11cb6235b097fb2140c32ab734521" title="Stores information about lines from the hough transform. each polarRho we want to find = 7 more value...">houghInfo</a>[startIndexOfStoringHoughInfoList + 6] = maxAccum;
<a name="l00648"></a>00648             }
<a name="l00649"></a>00649 
<a name="l00650"></a>00650             <span class="keywordflow">if</span> (this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a4b69c7da8f3962c2220e8d77fd9c51e9" title="If 0 then Old mode (top left origin), if 1 then New Hough mode( bottom Center).">currentMode</a> == <a class="code" href="class_attempt__7_1_1_image_analysis.html#aaa874c7b203d72acf483aac60d199c10">OLD_HOUGH_MODE</a>)
<a name="l00651"></a>00651             {
<a name="l00652"></a>00652                 maxTheta = (thetaIncrement * maxTheta) - 180; <span class="comment">// Scale the Theta back to real size.</span>
<a name="l00653"></a>00653                 maxRho = maxRho * <a class="code" href="class_attempt__7_1_1_image_analysis.html#aade101616dd021e3cbb0501146a78835" title="How big the steps are for a potiential rho values. Large values reduce computation but less acurate...">RhoIncrement</a>; <span class="comment">// Scale the Rho back to real size.</span>
<a name="l00654"></a>00654                 x1 = (int)(maxRho * Math.Cos(MathHelper.ToRadians(maxTheta))); <span class="comment">// Find the x Point corresponding the theta, rho</span>
<a name="l00655"></a>00655                 y1 = (int)(maxRho * Math.Sin(MathHelper.ToRadians(maxTheta))); <span class="comment">// Find the y Point corresponding the theta, rho               </span>
<a name="l00656"></a>00656 
<a name="l00657"></a>00657                 <span class="keywordflow">if</span> (x1 == 0)
<a name="l00658"></a>00658                 {
<a name="l00659"></a>00659                     x1 = 0.00001; <span class="comment">// don&#39;t divide by zero</span>
<a name="l00660"></a>00660                 }
<a name="l00661"></a>00661                 slope1 = Math.Round(Math.Tan(MathHelper.ToRadians(maxTheta)), 2); <span class="comment">// Calculating the slope and round to 2 digits.                </span>
<a name="l00662"></a>00662                 yintercept1 = (int)(y1 - (slope1 * x1));
<a name="l00663"></a>00663 
<a name="l00665"></a>00665 
<a name="l00666"></a>00666                 <span class="keywordtype">int</span> distance = 0;
<a name="l00667"></a>00667                 <span class="keywordtype">int</span> angle = 0;
<a name="l00668"></a>00668                 <span class="keywordtype">int</span> a = this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#affd258e6985c66c0a80415e3ddebb4e7" title="Screen Width of the image to analze.">screenWidth</a> / 2;
<a name="l00669"></a>00669                 <span class="keywordtype">int</span> b = this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#af5af6f29720f9a85b1cb6a71016b7af8" title="Screen Height of the image to analze.">screenHeight</a>;
<a name="l00670"></a>00670 
<a name="l00672"></a>00672                 <span class="keywordtype">double</span> xTransformed = (int)((Math.Pow(x1, 3) - b * x1 * y1 + a * Math.Pow(y1, 2) + x1 * Math.Pow(y1, 2)) / (Math.Pow(x1, 2) + Math.Pow(y1, 2)));
<a name="l00675"></a>00675                 <span class="keywordtype">double</span> yTransformed = (int)(Math.Pow(x1, 2) / y1 + y1 - (x1 * (Math.Pow(x1, 3) - b * x1 * y1 + a * Math.Pow(y1, 2) + x1 * Math.Pow(y1, 2))) / (y1 * (Math.Pow(x1, 2) + Math.Pow(y1, 2))));
<a name="l00676"></a>00676 
<a name="l00677"></a>00677                 distance = (int)Math.Sqrt(Math.Pow(xTransformed - a, 2) + Math.Pow(b - yTransformed, 2));
<a name="l00678"></a>00678                 angle = (int)MathHelper.ToDegrees((<span class="keywordtype">float</span>)Math.Atan((b - yTransformed) / (xTransformed - a)));
<a name="l00679"></a>00679 
<a name="l00680"></a>00680                 <span class="keywordflow">if</span> (angle &lt; 0)
<a name="l00681"></a>00681                 {
<a name="l00682"></a>00682                     angle += 180;
<a name="l00683"></a>00683                 }
<a name="l00684"></a>00684 
<a name="l00685"></a>00685                 <span class="comment">// Store the information found about the line in the &#39;this.houghInfo&#39; array starting at the value &#39;StartIndexOfStoringHoughInfoList&#39;</span>
<a name="l00686"></a>00686                 this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a51a11cb6235b097fb2140c32ab734521" title="Stores information about lines from the hough transform. each polarRho we want to find = 7 more value...">houghInfo</a>[startIndexOfStoringHoughInfoList + 0] = slope1;
<a name="l00687"></a>00687                 this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a51a11cb6235b097fb2140c32ab734521" title="Stores information about lines from the hough transform. each polarRho we want to find = 7 more value...">houghInfo</a>[startIndexOfStoringHoughInfoList + 1] = yintercept1;
<a name="l00688"></a>00688                 this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a51a11cb6235b097fb2140c32ab734521" title="Stores information about lines from the hough transform. each polarRho we want to find = 7 more value...">houghInfo</a>[startIndexOfStoringHoughInfoList + 2] = maxRho;
<a name="l00689"></a>00689                 this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a51a11cb6235b097fb2140c32ab734521" title="Stores information about lines from the hough transform. each polarRho we want to find = 7 more value...">houghInfo</a>[startIndexOfStoringHoughInfoList + 3] = maxTheta + 180; <span class="comment">// Stay in the range of the array. </span>
<a name="l00690"></a>00690                 this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a51a11cb6235b097fb2140c32ab734521" title="Stores information about lines from the hough transform. each polarRho we want to find = 7 more value...">houghInfo</a>[startIndexOfStoringHoughInfoList + 4] = x1;
<a name="l00691"></a>00691                 this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a51a11cb6235b097fb2140c32ab734521" title="Stores information about lines from the hough transform. each polarRho we want to find = 7 more value...">houghInfo</a>[startIndexOfStoringHoughInfoList + 5] = y1;
<a name="l00692"></a>00692                 this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a51a11cb6235b097fb2140c32ab734521" title="Stores information about lines from the hough transform. each polarRho we want to find = 7 more value...">houghInfo</a>[startIndexOfStoringHoughInfoList + 6] = maxAccum;
<a name="l00693"></a>00693                 this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a51a11cb6235b097fb2140c32ab734521" title="Stores information about lines from the hough transform. each polarRho we want to find = 7 more value...">houghInfo</a>[startIndexOfStoringHoughInfoList + 7] = xTransformed;
<a name="l00694"></a>00694                 this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a51a11cb6235b097fb2140c32ab734521" title="Stores information about lines from the hough transform. each polarRho we want to find = 7 more value...">houghInfo</a>[startIndexOfStoringHoughInfoList + 8] = yTransformed;
<a name="l00695"></a>00695                 this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a51a11cb6235b097fb2140c32ab734521" title="Stores information about lines from the hough transform. each polarRho we want to find = 7 more value...">houghInfo</a>[startIndexOfStoringHoughInfoList + 9] = distance; <span class="comment">// distance to line. </span>
<a name="l00696"></a>00696                 this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a51a11cb6235b097fb2140c32ab734521" title="Stores information about lines from the hough transform. each polarRho we want to find = 7 more value...">houghInfo</a>[startIndexOfStoringHoughInfoList + 10] = angle; <span class="comment">// angle to line. </span>
<a name="l00697"></a>00697             }
<a name="l00698"></a>00698 
<a name="l00699"></a>00699         }
<a name="l00700"></a>00700 
<a name="l00701"></a>00701 
<a name="l00702"></a>00702 
<a name="l00709"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#a327ee82eeb29ad6f4060bb4a9a21d7d8">00709</a>         <span class="keyword">private</span> <span class="keywordtype">void</span> <a class="code" href="class_attempt__7_1_1_image_analysis.html#a327ee82eeb29ad6f4060bb4a9a21d7d8" title="Part of the old Hough system. Finds the edge values on the screen of the lines based on the slope and...">CalculateStartandStopofLine</a>(<span class="keywordtype">double</span> x1, <span class="keywordtype">double</span> y1, <span class="keywordtype">double</span> slope1, <span class="keywordtype">int</span> startIndexforStorageArray)
<a name="l00710"></a>00710         {
<a name="l00711"></a>00711             <span class="keywordtype">int</span> startX = 0;
<a name="l00712"></a>00712             <span class="keywordtype">int</span> startY = 0;
<a name="l00713"></a>00713             <span class="keywordtype">int</span> endX = 0;
<a name="l00714"></a>00714             <span class="keywordtype">int</span> endY = 0;
<a name="l00715"></a>00715             <span class="keywordtype">int</span> yIntReal = 0;
<a name="l00716"></a>00716             <span class="keywordtype">double</span> slopeReal = 0;
<a name="l00717"></a>00717 
<a name="l00718"></a>00718             <span class="keywordflow">if</span> (this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a4b69c7da8f3962c2220e8d77fd9c51e9" title="If 0 then Old mode (top left origin), if 1 then New Hough mode( bottom Center).">currentMode</a> == <a class="code" href="class_attempt__7_1_1_image_analysis.html#a11feb673e1bb0953762222e164cec0c7">New_HOUGH_MODE</a>)
<a name="l00719"></a>00719             {
<a name="l00720"></a>00720                 slopeReal = -1 / slope1; <span class="comment">// Slope of the actual line-- not the slope of the line perpendicular (which is what the hough found)</span>
<a name="l00721"></a>00721                 yIntReal = (int)(y1 - (slopeReal * (x1 + this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#affd258e6985c66c0a80415e3ddebb4e7" title="Screen Width of the image to analze.">screenWidth</a> / 2))); <span class="comment">// y-intercept of the actual line-- not the slope of the line perpendicular (which is what the hough found)</span>
<a name="l00722"></a>00722 
<a name="l00723"></a>00723                 <span class="comment">// So far all the calculations assume origin is in bottom center. Now based off that information find the cordinates of where to start and stop</span>
<a name="l00724"></a>00724                 <span class="comment">// the hough lines in screen cordinates. Down is positive y in screen cordinates.             </span>
<a name="l00725"></a>00725                 <span class="comment">// Left Side</span>
<a name="l00726"></a>00726                 <span class="keywordflow">if</span> (yIntReal &gt;= 0 &amp;&amp; yIntReal &lt; this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#af5af6f29720f9a85b1cb6a71016b7af8" title="Screen Height of the image to analze.">screenHeight</a>)
<a name="l00727"></a>00727                 {
<a name="l00728"></a>00728                     startX = 0;
<a name="l00729"></a>00729                     startY = this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#af5af6f29720f9a85b1cb6a71016b7af8" title="Screen Height of the image to analze.">screenHeight</a> - yIntReal;                    
<a name="l00730"></a>00730                 }
<a name="l00731"></a>00731                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (yIntReal &lt;= 0)
<a name="l00732"></a>00732                 {                    
<a name="l00733"></a>00733                     startX = -(int)(yIntReal / slopeReal);
<a name="l00734"></a>00734                     startY = this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#af5af6f29720f9a85b1cb6a71016b7af8" title="Screen Height of the image to analze.">screenHeight</a>;
<a name="l00735"></a>00735                 }
<a name="l00736"></a>00736                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (yIntReal &gt; this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#af5af6f29720f9a85b1cb6a71016b7af8" title="Screen Height of the image to analze.">screenHeight</a>)
<a name="l00737"></a>00737                 {
<a name="l00738"></a>00738                     startX = (int)((this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#af5af6f29720f9a85b1cb6a71016b7af8" title="Screen Height of the image to analze.">screenHeight</a> - yIntReal) / slopeReal);
<a name="l00739"></a>00739                     startY = 0;
<a name="l00740"></a>00740                 }
<a name="l00741"></a>00741 
<a name="l00742"></a>00742                 <span class="comment">// Find the end cordinates of the line.</span>
<a name="l00743"></a>00743                 <span class="comment">// Right Side          </span>
<a name="l00744"></a>00744                 <span class="keywordtype">int</span> yright = (int)((slopeReal * this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#affd258e6985c66c0a80415e3ddebb4e7" title="Screen Width of the image to analze.">screenWidth</a>) + yIntReal);
<a name="l00745"></a>00745 
<a name="l00746"></a>00746                 <span class="keywordflow">if</span> (yright &gt; 0 &amp;&amp; yright &lt; this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#af5af6f29720f9a85b1cb6a71016b7af8" title="Screen Height of the image to analze.">screenHeight</a>)
<a name="l00747"></a>00747                 {                    
<a name="l00748"></a>00748                     endX = this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#affd258e6985c66c0a80415e3ddebb4e7" title="Screen Width of the image to analze.">screenWidth</a>;
<a name="l00749"></a>00749                     endY = this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#af5af6f29720f9a85b1cb6a71016b7af8" title="Screen Height of the image to analze.">screenHeight</a> - yright;
<a name="l00750"></a>00750                 }
<a name="l00751"></a>00751                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (yright &lt; 0)
<a name="l00752"></a>00752                 {
<a name="l00753"></a>00753                     endX = (int)(-yIntReal / slopeReal);
<a name="l00754"></a>00754                     endY = this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#af5af6f29720f9a85b1cb6a71016b7af8" title="Screen Height of the image to analze.">screenHeight</a>;
<a name="l00755"></a>00755                 }
<a name="l00756"></a>00756                 <span class="keywordflow">else</span>
<a name="l00757"></a>00757 
<a name="l00758"></a>00758                     <span class="keywordflow">if</span> (yright &gt; this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#af5af6f29720f9a85b1cb6a71016b7af8" title="Screen Height of the image to analze.">screenHeight</a>)
<a name="l00759"></a>00759                     {
<a name="l00760"></a>00760                         endX = (int)((this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#af5af6f29720f9a85b1cb6a71016b7af8" title="Screen Height of the image to analze.">screenHeight</a> - yIntReal) / slopeReal);
<a name="l00761"></a>00761                         endY = 0;
<a name="l00762"></a>00762                     }
<a name="l00763"></a>00763             }
<a name="l00764"></a>00764 
<a name="l00765"></a>00765             <span class="keywordflow">if</span> (this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a4b69c7da8f3962c2220e8d77fd9c51e9" title="If 0 then Old mode (top left origin), if 1 then New Hough mode( bottom Center).">currentMode</a> == <a class="code" href="class_attempt__7_1_1_image_analysis.html#aaa874c7b203d72acf483aac60d199c10">OLD_HOUGH_MODE</a>)
<a name="l00766"></a>00766             {
<a name="l00767"></a>00767                 <span class="comment">// remember that origin is top left corner and down is positive y</span>
<a name="l00768"></a>00768                 slopeReal = -1 / -slope1;
<a name="l00769"></a>00769                 yIntReal = (int)(-y1 - (slopeReal * x1));
<a name="l00770"></a>00770 
<a name="l00771"></a>00771                 <span class="keywordflow">if</span> (yIntReal &gt;= 0)
<a name="l00772"></a>00772                 {
<a name="l00773"></a>00773                     startX = (int)(-yIntReal / slopeReal);
<a name="l00774"></a>00774                     startY = 0;
<a name="l00775"></a>00775                 }
<a name="l00776"></a>00776 
<a name="l00777"></a>00777                 <span class="keywordflow">if</span> (yIntReal &lt;= 0 &amp;&amp; yIntReal &gt; -this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#af5af6f29720f9a85b1cb6a71016b7af8" title="Screen Height of the image to analze.">screenHeight</a>)
<a name="l00778"></a>00778                 {
<a name="l00779"></a>00779                     startX = 0;
<a name="l00780"></a>00780                     startY = -(int)yIntReal;
<a name="l00781"></a>00781                 }
<a name="l00782"></a>00782 
<a name="l00783"></a>00783                 <span class="keywordflow">if</span> (yIntReal &lt; -this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#af5af6f29720f9a85b1cb6a71016b7af8" title="Screen Height of the image to analze.">screenHeight</a>)
<a name="l00784"></a>00784                 {
<a name="l00785"></a>00785                     startX = (int)((-this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#af5af6f29720f9a85b1cb6a71016b7af8" title="Screen Height of the image to analze.">screenHeight</a> - yIntReal) / slopeReal);
<a name="l00786"></a>00786                     startY = this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#af5af6f29720f9a85b1cb6a71016b7af8" title="Screen Height of the image to analze.">screenHeight</a>;
<a name="l00787"></a>00787                 }
<a name="l00788"></a>00788 
<a name="l00789"></a>00789                 <span class="comment">// Find the end cordinates of the line.</span>
<a name="l00790"></a>00790                 <span class="comment">// Right Side          </span>
<a name="l00791"></a>00791                 <span class="keywordtype">int</span> yright = (int)((slopeReal * this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#affd258e6985c66c0a80415e3ddebb4e7" title="Screen Width of the image to analze.">screenWidth</a>) + yIntReal);
<a name="l00792"></a>00792 
<a name="l00793"></a>00793                 <span class="keywordflow">if</span> (yright &gt; 0)
<a name="l00794"></a>00794                 {
<a name="l00795"></a>00795                     endX = (int)(-yIntReal / slopeReal);
<a name="l00796"></a>00796                     endY = 0;
<a name="l00797"></a>00797                 }
<a name="l00798"></a>00798 
<a name="l00799"></a>00799                 <span class="keywordflow">if</span> (yright &lt; 0 &amp;&amp; yright &gt; -this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#af5af6f29720f9a85b1cb6a71016b7af8" title="Screen Height of the image to analze.">screenHeight</a>)
<a name="l00800"></a>00800                 {
<a name="l00801"></a>00801                     endX = this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#affd258e6985c66c0a80415e3ddebb4e7" title="Screen Width of the image to analze.">screenWidth</a>;
<a name="l00802"></a>00802                     endY = -yright;
<a name="l00803"></a>00803                 }
<a name="l00804"></a>00804 
<a name="l00805"></a>00805                 <span class="keywordflow">if</span> (yright &lt; -this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#af5af6f29720f9a85b1cb6a71016b7af8" title="Screen Height of the image to analze.">screenHeight</a>)
<a name="l00806"></a>00806                 {
<a name="l00807"></a>00807                     endX = (int)((-this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#af5af6f29720f9a85b1cb6a71016b7af8" title="Screen Height of the image to analze.">screenHeight</a> - yIntReal) / slopeReal);
<a name="l00808"></a>00808                     endY = this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#af5af6f29720f9a85b1cb6a71016b7af8" title="Screen Height of the image to analze.">screenHeight</a>;
<a name="l00809"></a>00809                 }
<a name="l00810"></a>00810 
<a name="l00811"></a>00811             }
<a name="l00812"></a>00812 
<a name="l00813"></a>00813             <span class="comment">// Store the Line information in the array &#39;houghLineStartandStopVectors&#39; starting at the value &#39;startIndexforStorageArray&#39;</span>
<a name="l00814"></a>00814             this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#aeb7215aa1a091fa531c07ee3aa4c03d6" title="Stores vector3 locations of the beginning and end points of two lines on the screen. Was part of the old Hough system, but potientially still useful, so has not deleted. 0 = start location of line, 1 = end location ofline.">houghLineStartandStopVectors</a>[startIndexforStorageArray + 0] = <span class="keyword">new</span> Vector3(startX, startY, 0);
<a name="l00815"></a>00815             this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#aeb7215aa1a091fa531c07ee3aa4c03d6" title="Stores vector3 locations of the beginning and end points of two lines on the screen. Was part of the old Hough system, but potientially still useful, so has not deleted. 0 = start location of line, 1 = end location ofline.">houghLineStartandStopVectors</a>[startIndexforStorageArray + 1] = <span class="keyword">new</span> Vector3(endX, endY, 0);
<a name="l00816"></a>00816         }
<a name="l00817"></a>00817 
<a name="l00823"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#a89a87d17049aa2c3f1b31af9b8ffcb07">00823</a>         <span class="keyword">private</span> <span class="keywordtype">void</span> <a class="code" href="class_attempt__7_1_1_image_analysis.html#a89a87d17049aa2c3f1b31af9b8ffcb07" title="For each white pixel that might be part of a line, Find all the potiential lines going through it and...">Hough</a>(<span class="keywordtype">bool</span>[,] isLine)
<a name="l00824"></a>00824         {
<a name="l00825"></a>00825             <span class="comment">// Find all possible lines through each point and put into array bin.</span>
<a name="l00826"></a>00826             <span class="keywordflow">for</span> (<span class="keywordtype">short</span> x = this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#aea1d803966f442e9699b52e196613f8c">count1E</a>; x &lt; this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#affd258e6985c66c0a80415e3ddebb4e7" title="Screen Width of the image to analze.">screenWidth</a>; x += <a class="code" href="class_attempt__7_1_1_image_analysis.html#a228e6183baa7e0b58771ad6be4117d7f" title="Inorder to make drawing go faster, not every pixels is updated every time. 1 out of This value square...">UpdateSquareDimForAnalysis</a>)
<a name="l00827"></a>00827             {
<a name="l00828"></a>00828                 <span class="keywordflow">for</span> (<span class="keywordtype">short</span> y = this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a1c9acb58142af8f283eb7958305b4337">count2E</a>; y &lt; this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#af5af6f29720f9a85b1cb6a71016b7af8" title="Screen Height of the image to analze.">screenHeight</a>; y += <a class="code" href="class_attempt__7_1_1_image_analysis.html#a228e6183baa7e0b58771ad6be4117d7f" title="Inorder to make drawing go faster, not every pixels is updated every time. 1 out of This value square...">UpdateSquareDimForAnalysis</a>)
<a name="l00829"></a>00829                 {
<a name="l00830"></a>00830                     <span class="keywordflow">if</span> (isLine[x, y] == <span class="keyword">true</span>)
<a name="l00831"></a>00831                     {
<a name="l00832"></a>00832                         <span class="keywordflow">if</span> (this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a4b69c7da8f3962c2220e8d77fd9c51e9" title="If 0 then Old mode (top left origin), if 1 then New Hough mode( bottom Center).">currentMode</a> == <a class="code" href="class_attempt__7_1_1_image_analysis.html#a11feb673e1bb0953762222e164cec0c7">New_HOUGH_MODE</a>)
<a name="l00833"></a>00833                         {
<a name="l00834"></a>00834                             <span class="keywordflow">for</span> (<span class="keywordtype">short</span> theta = 0; theta &lt; 180; theta += <a class="code" href="class_attempt__7_1_1_image_analysis.html#ae80e0958661793ecf50c1a17f1b7e9d0" title="How big the steps are for a potiential theta. In degreees. Large values reduce computation but less a...">ThetaIncrement</a>)
<a name="l00835"></a>00835                             {
<a name="l00836"></a>00836                                 <span class="comment">// Bottom center = origin. </span>
<a name="l00837"></a>00837                                 <span class="keywordtype">short</span> xprime = (short)(x - (this.screenWidth / 2));
<a name="l00838"></a>00838                                 <span class="keywordtype">short</span> yprime = (short)(-y + this.screenHeight);
<a name="l00839"></a>00839                                 <span class="keywordtype">short</span> rhoprime = (short)(((xprime * Math.Cos(MathHelper.ToRadians(theta))) + (yprime * Math.Sin(MathHelper.ToRadians(theta)))) / <a class="code" href="class_attempt__7_1_1_image_analysis.html#aade101616dd021e3cbb0501146a78835" title="How big the steps are for a potiential rho values. Large values reduce computation but less acurate...">RhoIncrement</a>);
<a name="l00840"></a>00840                                 <span class="keywordflow">if</span> (rhoprime &gt;= 0)
<a name="l00841"></a>00841                                 {
<a name="l00842"></a>00842                                     this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#ac861772cdcfacb7ac2401079c651eb4e" title="The accumlator for the hough values. Each position is a hough Bin. Each bin represents a line in Cart...">accum2</a>[theta / <a class="code" href="class_attempt__7_1_1_image_analysis.html#ae80e0958661793ecf50c1a17f1b7e9d0" title="How big the steps are for a potiential theta. In degreees. Large values reduce computation but less a...">ThetaIncrement</a>, rhoprime]++;
<a name="l00843"></a>00843                                 }
<a name="l00844"></a>00844 
<a name="l00845"></a>00845                                 <span class="comment">// because that would represent a line that is not on the screen</span>
<a name="l00846"></a>00846                                 <span class="keywordflow">else</span> 
<a name="l00847"></a>00847                                 {
<a name="l00848"></a>00848                                     this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#ac861772cdcfacb7ac2401079c651eb4e" title="The accumlator for the hough values. Each position is a hough Bin. Each bin represents a line in Cart...">accum2</a>[(theta + 180) / <a class="code" href="class_attempt__7_1_1_image_analysis.html#ae80e0958661793ecf50c1a17f1b7e9d0" title="How big the steps are for a potiential theta. In degreees. Large values reduce computation but less a...">ThetaIncrement</a>, -rhoprime]++;
<a name="l00849"></a>00849                                 }
<a name="l00854"></a>00854 
<a name="l00861"></a>00861 
<a name="l00866"></a>00866                             }
<a name="l00867"></a>00867                         }
<a name="l00868"></a>00868 
<a name="l00869"></a>00869                         <span class="keywordflow">if</span> (this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a4b69c7da8f3962c2220e8d77fd9c51e9" title="If 0 then Old mode (top left origin), if 1 then New Hough mode( bottom Center).">currentMode</a> == <a class="code" href="class_attempt__7_1_1_image_analysis.html#aaa874c7b203d72acf483aac60d199c10">OLD_HOUGH_MODE</a>)
<a name="l00870"></a>00870                         {
<a name="l00871"></a>00871                             <span class="keywordflow">for</span> (<span class="keywordtype">short</span> theta = -180; theta &lt; 180; theta += <a class="code" href="class_attempt__7_1_1_image_analysis.html#ae80e0958661793ecf50c1a17f1b7e9d0" title="How big the steps are for a potiential theta. In degreees. Large values reduce computation but less a...">ThetaIncrement</a>)
<a name="l00872"></a>00872                             {
<a name="l00873"></a>00873                                 <span class="keywordtype">short</span> rho = (short)(((x * Math.Cos(MathHelper.ToRadians(theta))) + (y * Math.Sin(MathHelper.ToRadians(theta)))) / <a class="code" href="class_attempt__7_1_1_image_analysis.html#aade101616dd021e3cbb0501146a78835" title="How big the steps are for a potiential rho values. Large values reduce computation but less acurate...">RhoIncrement</a>);
<a name="l00874"></a>00874                                 <span class="keywordflow">if</span> (rho &gt; 0)
<a name="l00875"></a>00875                                 {
<a name="l00876"></a>00876                                     this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#acb2ae3d661927b0467b5d4fdc7eded98">accum1</a>[(theta + 180) / <a class="code" href="class_attempt__7_1_1_image_analysis.html#ae80e0958661793ecf50c1a17f1b7e9d0" title="How big the steps are for a potiential theta. In degreees. Large values reduce computation but less a...">ThetaIncrement</a>, rho]++;
<a name="l00877"></a>00877                                 }
<a name="l00882"></a>00882                             }
<a name="l00883"></a>00883                         }
<a name="l00884"></a>00884                     }
<a name="l00885"></a>00885                 }
<a name="l00886"></a>00886             }
<a name="l00887"></a>00887 
<a name="l00888"></a>00888             this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#aea1d803966f442e9699b52e196613f8c">count1E</a>++;
<a name="l00889"></a>00889             <span class="keywordflow">if</span> (this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#aea1d803966f442e9699b52e196613f8c">count1E</a> == <a class="code" href="class_attempt__7_1_1_image_analysis.html#a228e6183baa7e0b58771ad6be4117d7f" title="Inorder to make drawing go faster, not every pixels is updated every time. 1 out of This value square...">UpdateSquareDimForAnalysis</a>)
<a name="l00890"></a>00890             {
<a name="l00891"></a>00891                 this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#aea1d803966f442e9699b52e196613f8c">count1E</a> = 0;
<a name="l00892"></a>00892                 this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a1c9acb58142af8f283eb7958305b4337">count2E</a>++;
<a name="l00893"></a>00893                 <span class="keywordflow">if</span> (this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a1c9acb58142af8f283eb7958305b4337">count2E</a> == <a class="code" href="class_attempt__7_1_1_image_analysis.html#a228e6183baa7e0b58771ad6be4117d7f" title="Inorder to make drawing go faster, not every pixels is updated every time. 1 out of This value square...">UpdateSquareDimForAnalysis</a>)
<a name="l00894"></a>00894                 {
<a name="l00895"></a>00895                     <span class="comment">// Find the largest values. </span>
<a name="l00896"></a>00896                     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="class_attempt__7_1_1_image_analysis.html#a74cfdb396e3abe4a6f5a9ccbe4f948e2" title="Number of lines the hough transform should find.">NumberofLinesToFind</a>; i++)
<a name="l00897"></a>00897                     {
<a name="l00898"></a>00898                         <span class="keywordflow">if</span> (this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a4b69c7da8f3962c2220e8d77fd9c51e9" title="If 0 then Old mode (top left origin), if 1 then New Hough mode( bottom Center).">currentMode</a> == <a class="code" href="class_attempt__7_1_1_image_analysis.html#a11feb673e1bb0953762222e164cec0c7">New_HOUGH_MODE</a>)
<a name="l00899"></a>00899                         {
<a name="l00900"></a>00900                             this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a74a456e2880a858c96a7d8802250c504" title="Finds Max value in Hough. Store information about that max.">FindMaxInAccumArrayOfHough</a>(this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#ac861772cdcfacb7ac2401079c651eb4e" title="The accumlator for the hough values. Each position is a hough Bin. Each bin represents a line in Cart...">accum2</a>, <a class="code" href="class_attempt__7_1_1_image_analysis.html#ae80e0958661793ecf50c1a17f1b7e9d0" title="How big the steps are for a potiential theta. In degreees. Large values reduce computation but less a...">ThetaIncrement</a>, (<span class="keywordtype">short</span>)(i * 11));
<a name="l00901"></a>00901                             this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a327ee82eeb29ad6f4060bb4a9a21d7d8" title="Part of the old Hough system. Finds the edge values on the screen of the lines based on the slope and...">CalculateStartandStopofLine</a>(this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a51a11cb6235b097fb2140c32ab734521" title="Stores information about lines from the hough transform. each polarRho we want to find = 7 more value...">houghInfo</a>[4 + (i * 11)], this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a51a11cb6235b097fb2140c32ab734521" title="Stores information about lines from the hough transform. each polarRho we want to find = 7 more value...">houghInfo</a>[5 + (i * 11)], this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a51a11cb6235b097fb2140c32ab734521" title="Stores information about lines from the hough transform. each polarRho we want to find = 7 more value...">houghInfo</a>[0 + (i * 11)], i * 4);
<a name="l00902"></a>00902                             this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a00bfc4bb52ece15ba645b81fb3ca3f2b" title="Clears the array arround the maximum.">ClearMaxInAccum</a>(this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#ac861772cdcfacb7ac2401079c651eb4e" title="The accumlator for the hough values. Each position is a hough Bin. Each bin represents a line in Cart...">accum2</a>, (<span class="keywordtype">int</span>)this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a51a11cb6235b097fb2140c32ab734521" title="Stores information about lines from the hough transform. each polarRho we want to find = 7 more value...">houghInfo</a>[(i * 11) + 2], (<span class="keywordtype">int</span>)this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a51a11cb6235b097fb2140c32ab734521" title="Stores information about lines from the hough transform. each polarRho we want to find = 7 more value...">houghInfo</a>[(i * 11) + 3]);
<a name="l00903"></a>00903                         }
<a name="l00904"></a>00904 
<a name="l00905"></a>00905                         <span class="keywordflow">if</span> (this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a4b69c7da8f3962c2220e8d77fd9c51e9" title="If 0 then Old mode (top left origin), if 1 then New Hough mode( bottom Center).">currentMode</a> == <a class="code" href="class_attempt__7_1_1_image_analysis.html#aaa874c7b203d72acf483aac60d199c10">OLD_HOUGH_MODE</a>)
<a name="l00906"></a>00906                         {
<a name="l00907"></a>00907                             this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a74a456e2880a858c96a7d8802250c504" title="Finds Max value in Hough. Store information about that max.">FindMaxInAccumArrayOfHough</a>(this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#acb2ae3d661927b0467b5d4fdc7eded98">accum1</a>, <a class="code" href="class_attempt__7_1_1_image_analysis.html#ae80e0958661793ecf50c1a17f1b7e9d0" title="How big the steps are for a potiential theta. In degreees. Large values reduce computation but less a...">ThetaIncrement</a>, (<span class="keywordtype">short</span>)(i * 11));
<a name="l00908"></a>00908                             this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a327ee82eeb29ad6f4060bb4a9a21d7d8" title="Part of the old Hough system. Finds the edge values on the screen of the lines based on the slope and...">CalculateStartandStopofLine</a>(this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a51a11cb6235b097fb2140c32ab734521" title="Stores information about lines from the hough transform. each polarRho we want to find = 7 more value...">houghInfo</a>[4 + (i * 11)], this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a51a11cb6235b097fb2140c32ab734521" title="Stores information about lines from the hough transform. each polarRho we want to find = 7 more value...">houghInfo</a>[5 + (i * 11)], this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a51a11cb6235b097fb2140c32ab734521" title="Stores information about lines from the hough transform. each polarRho we want to find = 7 more value...">houghInfo</a>[0 + (i * 11)], i * 4);
<a name="l00909"></a>00909 
<a name="l00910"></a>00910                             <span class="comment">// From top (0,0) to perpendicular</span>
<a name="l00911"></a>00911                             this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#aeb7215aa1a091fa531c07ee3aa4c03d6" title="Stores vector3 locations of the beginning and end points of two lines on the screen. Was part of the old Hough system, but potientially still useful, so has not deleted. 0 = start location of line, 1 = end location ofline.">houghLineStartandStopVectors</a>[i * 4 + 2] = <span class="keyword">new</span> Vector3((<span class="keywordtype">float</span>)this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a51a11cb6235b097fb2140c32ab734521" title="Stores information about lines from the hough transform. each polarRho we want to find = 7 more value...">houghInfo</a>[i * 11 + 4], (<span class="keywordtype">float</span>)this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a51a11cb6235b097fb2140c32ab734521" title="Stores information about lines from the hough transform. each polarRho we want to find = 7 more value...">houghInfo</a>[i * 11 + 5], 0);
<a name="l00912"></a>00912 
<a name="l00913"></a>00913                             <span class="comment">// From bottom center to perpendicular</span>
<a name="l00914"></a>00914                             this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#aeb7215aa1a091fa531c07ee3aa4c03d6" title="Stores vector3 locations of the beginning and end points of two lines on the screen. Was part of the old Hough system, but potientially still useful, so has not deleted. 0 = start location of line, 1 = end location ofline.">houghLineStartandStopVectors</a>[i * 4 + 3] = <span class="keyword">new</span> Vector3((<span class="keywordtype">float</span>)this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a51a11cb6235b097fb2140c32ab734521" title="Stores information about lines from the hough transform. each polarRho we want to find = 7 more value...">houghInfo</a>[i * 11 + 7], (<span class="keywordtype">float</span>)this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a51a11cb6235b097fb2140c32ab734521" title="Stores information about lines from the hough transform. each polarRho we want to find = 7 more value...">houghInfo</a>[i * 11 + 8], 0);
<a name="l00915"></a>00915 
<a name="l00916"></a>00916                             this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a00bfc4bb52ece15ba645b81fb3ca3f2b" title="Clears the array arround the maximum.">ClearMaxInAccum</a>(this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#acb2ae3d661927b0467b5d4fdc7eded98">accum1</a>, (<span class="keywordtype">int</span>)this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a51a11cb6235b097fb2140c32ab734521" title="Stores information about lines from the hough transform. each polarRho we want to find = 7 more value...">houghInfo</a>[(i * 11) + 2], (<span class="keywordtype">int</span>)this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a51a11cb6235b097fb2140c32ab734521" title="Stores information about lines from the hough transform. each polarRho we want to find = 7 more value...">houghInfo</a>[(i * 11) + 3]);
<a name="l00917"></a>00917                         }
<a name="l00918"></a>00918                     }
<a name="l00919"></a>00919 
<a name="l00920"></a>00920                     <span class="keywordflow">if</span> (this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a4b69c7da8f3962c2220e8d77fd9c51e9" title="If 0 then Old mode (top left origin), if 1 then New Hough mode( bottom Center).">currentMode</a> == <a class="code" href="class_attempt__7_1_1_image_analysis.html#a11feb673e1bb0953762222e164cec0c7">New_HOUGH_MODE</a>)
<a name="l00921"></a>00921                     {
<a name="l00922"></a>00922                         this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#aa983bdc246185a5a41414e1db84534dd" title="Find the average theta values. Weigh them according to the rho value of each one. Make a turning desi...">FindAverages</a>(); <span class="comment">// Find the average rho and theta</span>
<a name="l00923"></a>00923                         Array.Clear(this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#ac861772cdcfacb7ac2401079c651eb4e" title="The accumlator for the hough values. Each position is a hough Bin. Each bin represents a line in Cart...">accum2</a>, 0, this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#ac861772cdcfacb7ac2401079c651eb4e" title="The accumlator for the hough values. Each position is a hough Bin. Each bin represents a line in Cart...">accum2</a>.Length); <span class="comment">// Clear the accumulator</span>
<a name="l00924"></a>00924                     }
<a name="l00925"></a>00925 
<a name="l00926"></a>00926                     <span class="keywordflow">if</span> (this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a4b69c7da8f3962c2220e8d77fd9c51e9" title="If 0 then Old mode (top left origin), if 1 then New Hough mode( bottom Center).">currentMode</a> == <a class="code" href="class_attempt__7_1_1_image_analysis.html#aaa874c7b203d72acf483aac60d199c10">OLD_HOUGH_MODE</a>)
<a name="l00927"></a>00927                     {
<a name="l00928"></a>00928                         Array.Clear(this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#acb2ae3d661927b0467b5d4fdc7eded98">accum1</a>, 0, this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#acb2ae3d661927b0467b5d4fdc7eded98">accum1</a>.Length); <span class="comment">// Clear the accumulator                       </span>
<a name="l00929"></a>00929 
<a name="l00930"></a>00930                     }
<a name="l00931"></a>00931 
<a name="l00932"></a>00932                     this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a1c9acb58142af8f283eb7958305b4337">count2E</a> = 0;
<a name="l00933"></a>00933                 }
<a name="l00934"></a>00934             }
<a name="l00935"></a>00935         }
<a name="l00936"></a>00936 
<a name="l00937"></a>00937 
<a name="l00941"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#aa983bdc246185a5a41414e1db84534dd">00941</a>         <span class="keyword">private</span> <span class="keywordtype">void</span> <a class="code" href="class_attempt__7_1_1_image_analysis.html#aa983bdc246185a5a41414e1db84534dd" title="Find the average theta values. Weigh them according to the rho value of each one. Make a turning desi...">FindAverages</a>()
<a name="l00942"></a>00942         {
<a name="l00943"></a>00943             <span class="keywordtype">int</span> thetaSum = 0;
<a name="l00944"></a>00944             <span class="keywordtype">int</span> rhoSum = 0;
<a name="l00945"></a>00945             <span class="keywordtype">int</span> count = 0;
<a name="l00946"></a>00946             <span class="keywordtype">int</span> rho = -1;
<a name="l00947"></a>00947             <span class="keywordtype">int</span> theta = -1;
<a name="l00948"></a>00948             <span class="keywordtype">int</span> binSize = 0;
<a name="l00949"></a>00949             <span class="keywordtype">int</span> turn = -1;
<a name="l00950"></a>00950 
<a name="l00951"></a>00951             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="class_attempt__7_1_1_image_analysis.html#a74cfdb396e3abe4a6f5a9ccbe4f948e2" title="Number of lines the hough transform should find.">NumberofLinesToFind</a>; i++)
<a name="l00952"></a>00952             {
<a name="l00953"></a>00953                 <span class="comment">// If the rho or theta are the same as the last one, then don&#39;t count it. </span>
<a name="l00954"></a>00954                 <span class="keywordflow">if</span> (this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a51a11cb6235b097fb2140c32ab734521" title="Stores information about lines from the hough transform. each polarRho we want to find = 7 more value...">houghInfo</a>[((i * 11) + 4)] != rho &amp;&amp; this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a51a11cb6235b097fb2140c32ab734521" title="Stores information about lines from the hough transform. each polarRho we want to find = 7 more value...">houghInfo</a>[((i * 11) + 5)] != theta &amp;&amp; this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a51a11cb6235b097fb2140c32ab734521" title="Stores information about lines from the hough transform. each polarRho we want to find = 7 more value...">houghInfo</a>[((i * 11) + 6)] * 1.5 &gt; binSize)
<a name="l00955"></a>00955                 {
<a name="l00956"></a>00956                     rho = (int)this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a51a11cb6235b097fb2140c32ab734521" title="Stores information about lines from the hough transform. each polarRho we want to find = 7 more value...">houghInfo</a>[((i * 11) + 2)]; <span class="comment">// Sum the rhos</span>
<a name="l00957"></a>00957                     theta = (int)this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a51a11cb6235b097fb2140c32ab734521" title="Stores information about lines from the hough transform. each polarRho we want to find = 7 more value...">houghInfo</a>[((i * 11) + 3)]; <span class="comment">// Sum the thetas</span>
<a name="l00958"></a>00958                     binSize = (int)this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a51a11cb6235b097fb2140c32ab734521" title="Stores information about lines from the hough transform. each polarRho we want to find = 7 more value...">houghInfo</a>[((i * 11) + 4)]; <span class="comment">// Get bin size</span>
<a name="l00959"></a>00959                     rhoSum += rho;
<a name="l00960"></a>00960                     thetaSum += theta;
<a name="l00961"></a>00961                     turn += (int)((theta - 90) * (double)((i / NumberofLinesToFind) * (577 - rho) / 500));
<a name="l00962"></a>00962                     count++;
<a name="l00963"></a>00963                 }
<a name="l00964"></a>00964             }
<a name="l00965"></a>00965 
<a name="l00966"></a>00966             <span class="keywordtype">int</span> averageTheta = thetaSum / count;
<a name="l00967"></a>00967             this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a51a11cb6235b097fb2140c32ab734521" title="Stores information about lines from the hough transform. each polarRho we want to find = 7 more value...">houghInfo</a>[NumberofLinesToFind * 11] = averageTheta; <span class="comment">// Compute and store the averages</span>
<a name="l00968"></a>00968             this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a51a11cb6235b097fb2140c32ab734521" title="Stores information about lines from the hough transform. each polarRho we want to find = 7 more value...">houghInfo</a>[(NumberofLinesToFind * 11) + 1] = rhoSum / count;
<a name="l00969"></a>00969             <span class="keywordflow">if</span> (this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#a9b47675bd42bc8dacf5c93bb02befd81" title="If true then steering desisions will be based off the theta&amp;#39;s of the hough transform.">turnIndicatorisTheta</a> == <span class="keyword">true</span>)
<a name="l00970"></a>00970             {
<a name="l00971"></a>00971                 this.<a class="code" href="class_attempt__7_1_1_image_analysis.html#ace2cb703da0214a4f5565f2c619d54f8" title="The turn indicator measures measures how much the analysis things the robot should go right or left...">turnIndication</a> = turn;
<a name="l00972"></a>00972             }
<a name="l00973"></a>00973         }
<a name="l00974"></a>00974        
<a name="l00982"></a><a class="code" href="class_attempt__7_1_1_image_analysis.html#a00bfc4bb52ece15ba645b81fb3ca3f2b">00982</a>         <span class="keyword">private</span> <span class="keywordtype">short</span>[,] <a class="code" href="class_attempt__7_1_1_image_analysis.html#a00bfc4bb52ece15ba645b81fb3ca3f2b" title="Clears the array arround the maximum.">ClearMaxInAccum</a>(<span class="keywordtype">short</span>[,] accumToChange, <span class="keywordtype">int</span> rho, <span class="keywordtype">int</span> theta)
<a name="l00983"></a>00983         {
<a name="l00984"></a>00984             rho = rho / <a class="code" href="class_attempt__7_1_1_image_analysis.html#aade101616dd021e3cbb0501146a78835" title="How big the steps are for a potiential rho values. Large values reduce computation but less acurate...">RhoIncrement</a>;
<a name="l00985"></a>00985             theta = theta / <a class="code" href="class_attempt__7_1_1_image_analysis.html#ae80e0958661793ecf50c1a17f1b7e9d0" title="How big the steps are for a potiential theta. In degreees. Large values reduce computation but less a...">ThetaIncrement</a>;
<a name="l00986"></a>00986 
<a name="l00987"></a>00987             <span class="keywordtype">int</span> accumDim1 = accumToChange.GetLength(0); <span class="comment">// Get the size accum Array</span>
<a name="l00988"></a>00988             <span class="keywordtype">int</span> accumDim2 = accumToChange.GetLength(1);
<a name="l00989"></a>00989 
<a name="l00990"></a>00990             <span class="comment">// Clear the one with the most votes</span>
<a name="l00991"></a>00991             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> degree = -<a class="code" href="class_attempt__7_1_1_image_analysis.html#af57eb11bc470f90921bed1b60cfc9741" title="Number of degrees around a maximum to clear around before searching the Accumulator again...">ClearArroundMaxDegree</a> / <a class="code" href="class_attempt__7_1_1_image_analysis.html#ae80e0958661793ecf50c1a17f1b7e9d0" title="How big the steps are for a potiential theta. In degreees. Large values reduce computation but less a...">ThetaIncrement</a>; degree &lt; <a class="code" href="class_attempt__7_1_1_image_analysis.html#af57eb11bc470f90921bed1b60cfc9741" title="Number of degrees around a maximum to clear around before searching the Accumulator again...">ClearArroundMaxDegree</a> / <a class="code" href="class_attempt__7_1_1_image_analysis.html#ae80e0958661793ecf50c1a17f1b7e9d0" title="How big the steps are for a potiential theta. In degreees. Large values reduce computation but less a...">ThetaIncrement</a>; degree++)
<a name="l00992"></a>00992             {
<a name="l00993"></a>00993                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> phi = -<a class="code" href="class_attempt__7_1_1_image_analysis.html#a5de31952bf3d80b7ad21aa4c0acc3092" title="Number of rho values around a maximum to clear around before searching the Accumulator again...">ClearArroundMaxRho</a> / <a class="code" href="class_attempt__7_1_1_image_analysis.html#aade101616dd021e3cbb0501146a78835" title="How big the steps are for a potiential rho values. Large values reduce computation but less acurate...">RhoIncrement</a>; phi &lt; <a class="code" href="class_attempt__7_1_1_image_analysis.html#a5de31952bf3d80b7ad21aa4c0acc3092" title="Number of rho values around a maximum to clear around before searching the Accumulator again...">ClearArroundMaxRho</a> / <a class="code" href="class_attempt__7_1_1_image_analysis.html#aade101616dd021e3cbb0501146a78835" title="How big the steps are for a potiential rho values. Large values reduce computation but less acurate...">RhoIncrement</a>; phi++)
<a name="l00994"></a>00994                 {
<a name="l00995"></a>00995                     <span class="keywordtype">int</span> thetaprime = (theta + degree) % accumDim1;
<a name="l00996"></a>00996                     <span class="keywordtype">int</span> rhoprime = (rho + phi) % accumDim2;
<a name="l00997"></a>00997                     <span class="keywordflow">if</span> (thetaprime &gt; 0 &amp;&amp; thetaprime &lt; accumDim1 &amp;&amp; rhoprime &gt; 0 &amp;&amp; rhoprime &lt; accumDim2)
<a name="l00998"></a>00998                     {
<a name="l00999"></a>00999                         accumToChange[thetaprime, rhoprime] = 0;
<a name="l01000"></a>01000                     }
<a name="l01001"></a>01001                 }
<a name="l01002"></a>01002             }
<a name="l01003"></a>01003 
<a name="l01004"></a>01004             <span class="keywordflow">return</span> accumToChange;
<a name="l01005"></a>01005         }
<a name="l01006"></a>01006     }
<a name="l01007"></a>01007 }
</pre></div></div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="_image_analysis2_8cs.html">ImageAnalysis2.cs</a>      </li>
      <li class="footer">Generated on Mon Mar 28 2011 23:56:56 for Robot Simulation by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </li>
    </ul>
  </div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


</body>
</html>
